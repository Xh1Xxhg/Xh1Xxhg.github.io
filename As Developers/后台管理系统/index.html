<!-- build time:Sat Mar 23 2024 11:03:00 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="十年磨一剑" href="http://yoursite.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="十年磨一剑" href="http://yoursite.com/atom.xml"><link rel="alternate" type="application/json" title="十年磨一剑" href="http://yoursite.com/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="As Developers"><link rel="canonical" href="http://yoursite.com/As%20Developers/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"><title>SpringBoot3+Vue2 后台管理系统 - 开发 | Xh1Xxhg's Home = 十年磨一剑 = Go For 全栈</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">SpringBoot3+Vue2 后台管理系统</h1><div class="meta"><span class="item" title="创建时间：2024-03-16 23:29:08"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-03-16T23:29:08+08:00">2024-03-16</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>69k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>1:03</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Xh1Xxhg's Home</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giciusoyjnj219g0u0x56.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giph4fomxoj20zk0m8axp.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicitf0kl1j20zk0m87fe.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicliwyw55j20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipesng5oej20zk0m87d4.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="item" rel="index" title="分类于 开发"><span itemprop="name">开发</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://yoursite.com/As%20Developers/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Xh1Xxhg"><meta itemprop="description" content="Go For 全栈, My 网安之路"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="十年磨一剑"></span><div class="body md" itemprop="articleBody"><h1 id="vue2继承elementui"><a class="anchor" href="#vue2继承elementui">#</a> Vue2 继承 ElementUI</h1><h2 id="vue"><a class="anchor" href="#vue">#</a> Vue</h2><h3 id="卸载"><a class="anchor" href="#卸载">#</a> 卸载</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>//卸载3.0之前的版本</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">npm</span> uninstall <span class="token parameter variable">-g</span> vue-cli</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">yarn</span> global remove vue-cli</pre></td></tr><tr><td data-num="4"></td><td><pre>//卸载3.0之后的版本（可以统一使用此指令卸载）</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">npm</span> uninstall <span class="token parameter variable">-g</span> @vue/cli</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">yarn</span> global remove @vue/cli</pre></td></tr></table></figure><h3 id="安装"><a class="anchor" href="#安装">#</a> 安装</h3><ol><li><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> @vue/cli@4.5.14</pre></td></tr></table></figure></li><li><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>vue <span class="token parameter variable">--version</span></pre></td></tr></table></figure></li></ol><h3 id="创建项目"><a class="anchor" href="#创建项目">#</a> 创建项目</h3><ol><li><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>vue create vue</pre></td></tr></table></figure></li></ol><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115230234928.png" alt="image-20240115230234928"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115231358864.png" alt="image-20240115231358864"></p><p>空格进行选择，方向键移动</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115231433151.png" alt="image-20240115231433151"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115231455356.png" alt="image-20240115231455356"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115231550858.png" alt="image-20240115231550858"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115231611122.png" alt="image-20240115231611122"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115231632392.png" alt="image-20240115231632392"></p><p><strong>npm run serve</strong> 启动</p><p>修改部分代码（<strong>数据绑定</strong>），显示效果</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115233853513.png" alt="image-20240115233853513"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115233925562.png" alt="image-20240115233925562"></p><h2 id="element"><a class="anchor" href="#element">#</a> Element</h2><p>利用<strong> Element 框架</strong>做后台系统，文档如下</p><p><span class="exturl" data-url="aHR0cHM6Ly9lbGVtZW50LmVsZW1lLmNuLyMvemgtQ04vY29tcG9uZW50L2luc3RhbGxhdGlvbg==">https://element.eleme.cn/#/zh-CN/component/installation</span></p><h3 id="安装-2"><a class="anchor" href="#安装-2">#</a> 安装</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> i element-ui <span class="token parameter variable">-S</span></pre></td></tr></table></figure><p>安装好后 package.json 的版本依赖</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115235336241.png" alt="image-20240115235336241"></p><h3 id="使用方法"><a class="anchor" href="#使用方法">#</a> 使用方法</h3><p><strong>main.js 引入 element 组件</strong></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">size</span><span class="token operator">:</span><span class="token string">"small"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  router<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>在 Home.vue 引入 el-button 测试</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116084601170.png" alt="image-20240116084601170"></p><pre><code class="language-vue">&lt;template&gt;
  &lt;div class=&quot;home&quot;&gt;
    &lt;el-button type=&quot;danger&quot;&gt;这是&#123;&#123;msg&#125;&#125;&lt;/el-button&gt;
    &lt;img alt=&quot;Vue logo&quot; src=&quot;../assets/logo.png&quot;&gt;
    &lt;HelloWorld msg=&quot;Welcome to Your Vue.js App&quot;/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// @ is an alias to /src
import HelloWorld from '@/components/HelloWorld.vue'

export default &#123;
  name: 'Home',
  components: &#123;
    HelloWorld
  &#125;,
  data() &#123;
    return &#123;
      msg: &quot;Xh1Xxhg&quot;
    &#125;
  &#125;
&#125;
&lt;/script&gt;
</code></pre><h1 id="vue后台主题布局"><a class="anchor" href="#vue后台主题布局">#</a> Vue 后台主题布局</h1><ol><li><p>element <strong>Container 布局容器</strong> ——&gt;CV 代码</p></li><li><p>创建 assets/global.css，在 main.js 用 import 引入</p></li><li><p>return 的数组个数减少，列表长度减少</p></li><li><p>导航栏贴边 —— 所有外部容器高度撑满 height: 100%</p></li><li><p>菜单折叠属性，动态绑定 collapseBtnClass 变量 https://element.eleme.cn/#/zh-CN/component/menu#menu-group-attribute</p></li><li><p>icon 图标 https://element.eleme.cn/#/zh-CN/component/icon</p></li><li><p>cursor: pointer 悬浮变成小手形状</p></li><li><p><code>&lt;i&gt;</code> 元素是 HTML 中的内联元素，通常用于表示斜体文本或图标。</p></li><li><p>v-bind 指令 ——&quot;: 属性名&quot;—— 使用冒号前缀，可以将 HTML 元素的属性与 Vue.js 组件实例中的数据进行绑定</p></li><li><p>&lt;span slot=&quot;title&quot;&gt; 导航三 &lt; /span&gt;</p></li><li><p>插槽 slot</p><ol><li><p>父组件导入子组件并调用，将父组件的内容渲染到子组件 &lt;slot&gt;&lt;/slot &gt; 占位处</p></li><li><p>element Collapse 组件属性，slot=&quot;title&quot; 传递组件内容为面板标题</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116130013554.png" alt="image-20240116130013554"></p></li></ol></li><li><p><code>v-if</code> 是 Vue.js 框架中的一种条件渲染指令。它用于根据条件来决定是否渲染或移除某个元素或组件。若条件为 false，则元素被移除</p></li><li><p>左侧导航栏阴影效果（模仿若依）</p><figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token property">box-shadow</span><span class="token punctuation">:</span> 2px 0 6px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>21<span class="token punctuation">,</span>41<span class="token punctuation">,</span>.35<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>去掉 div 的边框可以去掉 css 的 border 属性 ，或者覆盖 border 属性为 none 来实现 <code>border: none</code></p></li><li><p>padding: 10px 0 其余方向均为 10px，左侧为 0</p></li><li><p><code>slot-scope</code> 属性用于定义插槽的作用域，以便在插槽内部可以访问父组件中的数据。Vue.js 2.x 中的 <code>slot-scope</code> 在 Vue.js 3.x 中已经被废弃，在 Vue.js 3.x 中，可以使用 <code>&lt;template v-slot&gt;</code> 来实现插槽的作用域功能。</p></li><li><p>element——Breadcrumb 面包屑 —— 页签</p></li><li><p>el-table 设置边框和斑马纹时属性 true 不用写，false 才需要写</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117123309870.png" alt="image-20240117123309870"></p></li><li></li></ol><h1 id="springboot初始"><a class="anchor" href="#springboot初始">#</a> Springboot 初始</h1><h2 id="创建项目-2"><a class="anchor" href="#创建项目-2">#</a> 创建项目</h2><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116181343209.png" alt="image-20240116181343209"></p><p>选择 Lombok，简化 java 开发代码的插件</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116180716832.png" alt="image-20240116180716832"></p><p>选 Spring Web</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116180758632.png" alt="image-20240116180758632"></p><p>SQL 选择 MySQL Driver 和 Mybatis Framework</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116180914293.png" alt="image-20240116180914293"></p><p><strong>总</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116181030444.png" alt="image-20240116181030444"></p><h2 id="pom配置阿里云仓库"><a class="anchor" href="#pom配置阿里云仓库">#</a> pom 配置阿里云仓库</h2><p>在 maven pom.xml 中直接使用阿里云镜像<br>仅仅在 maven settings.xml 中添加本地仓库，项目中单独配置阿里云镜像</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>aliyun-repos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>https://maven.aliyun.com/repository/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepositories</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepository</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>aliyun-repos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>https://maven.aliyun.com/repository/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepository</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepositories</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><blockquote><p>注： &lt;repositories&gt; 标签控制 maven 依赖下载的镜像地址，&lt;pluginRepositories&gt; 标签控制 maven 插件的下载镜像地址，如果其中一个没配置，那么默认依旧使用默认的仓库地址。</p></blockquote><blockquote><p>个人想法：这样的好处是，项目团队共同开发的时候，直接拉取代码就好，不用单独配置本地 maven 配置文件，如果多个项目共同使用一个 maven 配置文件，可能不方便，如果涉及到自己搭建的私服，不同项目的私服地址可能不一样。项目用什么就配置什么，灵活点。</p></blockquote><blockquote><p>补充：<br>setting.xml：该文件配置的是全局模式<br>pom.xml：该文件的配置的是项目独享模式<br>注意：若 pom.xml 和 setting.xml 同时配置了，以 pom.xml 为准。</p></blockquote><h2 id="搭建项目"><a class="anchor" href="#搭建项目">#</a> 搭建项目</h2><p>删除没用的文件</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116210445062.png" alt="image-20240116210445062"></p><p>运行报错，需要连接数据库</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116222622477.png" alt="image-20240116222622477"></p><p>创建数据库 Navicat / SQLyog（此处为 SQLyog）</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116211902920.png" alt="image-20240116211902920"></p><p><strong>resources/application.yml</strong></p><figure class="highlight yaml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token key atrule">spring</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/xh1xxhg<span class="token punctuation">?</span>serverTimezone=GMT%2b8</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token key atrule">username</span><span class="token punctuation">:</span> root</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token key atrule">password</span><span class="token punctuation">:</span> root</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token key atrule">server</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9090</span></pre></td></tr></table></figure><p><strong>启动类 SpringbootApplication.java</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token annotation punctuation">@RestController</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token annotation punctuation">@SpringBootApplication</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootApplication</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>       <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>       <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>可以成功运行</p><p>把 vue 目录拖入 springboot 目录里，配置 vue 启动方式，点击箭头即可启动 vue 项目</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116223554310.png" alt="image-20240116223554310"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116223529504.png" alt="image-20240116223529504"></p><p>前后端部分可以同时运行</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116223801433.png" alt="image-20240116223801433"></p><p>创建新表</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116224840893.png" alt="image-20240116224840893"></p><p>创建一个元组</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116225020562.png" alt="image-20240116225020562"></p><p>回到 IDEA，启动类目录下新建 entity 目录，创建实体类，Alt+Insert 创建 getter setter（<strong>冗余</strong>）</p><p>此处导入<strong> lombok.data</strong> 通过<strong>注解 @Data</strong></p><p>创建 getter，setter 简化代码</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116225642843.png" alt="image-20240116225642843"></p><p>创建 mapper 包，新建 UserMapper 接口</p><p>写 sql 查询，加上 @Mapper 注解</p><p>再创建 controller 包，新建 UserController 实现类</p><p>Ctrl+Alt+O 去除无用的包</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117084137569.png" alt="image-20240117084137569"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117084151069.png" alt="image-20240117084151069"></p><p>debug 开启服务，刷新 web 界面</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117084701545.png" alt="image-20240117084701545"></p><h1 id="springboot实现增删改查"><a class="anchor" href="#springboot实现增删改查">#</a> Springboot 实现增删改查</h1><h2 id="新增功能"><a class="anchor" href="#新增功能">#</a> 新增功能</h2><p>新建接口 ——SQL 语句</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">insert</span> <span class="token keyword">into</span> sys_user<span class="token punctuation">(</span>username<span class="token punctuation">,</span>password<span class="token punctuation">,</span>nickname<span class="token punctuation">,</span>email<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>address<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">"Xh1Xxhg"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">,</span><span class="token string">"XoX"</span><span class="token punctuation">,</span><span class="token string">"X@163.com"</span><span class="token punctuation">,</span><span class="token string">"18888888888"</span><span class="token punctuation">,</span><span class="token string">"浙江"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>SQLyog 执行查询</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117085809227.png" alt="image-20240117085809227"></p><p>查询写入 UserMapper</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117090325536.png" alt="image-20240117090325536"></p><p>controller 实现插入保存</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117090357111.png" alt="image-20240117090357111"></p><p>这里利用 Postman 测试接口</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117091727743.png" alt="image-20240117091727743"></p><p>数据库成功插入</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117091701786.png" alt="image-20240117091701786"></p><h2 id="更新功能"><a class="anchor" href="#更新功能">#</a> 更新功能</h2><p>新增 + 更新实现需要 service 层</p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTMxNDA4NDEvYXJ0aWNsZS9kZXRhaWxzLzEyMDk4MDM4Mg==">https://blog.csdn.net/u013140841/article/details/120980382</span></p><p>Service</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117100943847.png" alt="image-20240117100943847"></p><p>Mapper</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117100958818.png" alt="image-20240117100958818"></p><p>controller</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117101055573.png" alt="image-20240117101055573"></p><p>邮箱信息更新成功</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117102721678.png" alt="image-20240117102721678"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117100916304.png" alt="image-20240117100916304"></p><p><strong>动态 sql—— 不覆盖原有</strong></p><p>安装插件 MybatisX，新建 resources/mapper/User.xml</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117101532371.png" alt="image-20240117101532371"></p><p>通过 User.xml 在 namespace 中写全类名连接到一块</p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0ODE5MzcyL2FydGljbGUvZGV0YWlscy83NzE2MDYyNA==">https://blog.csdn.net/qq_34819372/article/details/77160624</span></p><p><strong>动态 sql 代码</strong></p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">&lt;!-- mapper 标签都有一个唯一标示，即为命名空间 namespace --></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.xoxbc.springboot.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        UPDATE sys_user</pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>                username = #&#123;username&#125;</pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nickname != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>                nickname = #&#123;nickname&#125;,</pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>                email = #&#123;email&#125;,</pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre>                phone = #&#123;phone&#125;,</pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>address != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>                address = #&#123;address&#125;</pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre>            id = #&#123;id&#125;</pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>成功 send 请求</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117103239221.png" alt="image-20240117103239221"></p><p>数据库内容也随之更新</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117103301140.png" alt="image-20240117103301140"></p><p>终端打印查询的 sql 语句，在配置中修改</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117103636926.png" alt="image-20240117103636926"></p><figure class="highlight yaml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token key atrule">mybatis</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mapper/<span class="token important">*.xml</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token key atrule">configuration</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl</pre></td></tr></table></figure><p>send 请求</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117103652253.png" alt="image-20240117103652253"></p><p>成功更改</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117103711674.png" alt="image-20240117103711674"></p><p>sql 语句终端打印</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117103738336.png" alt="image-20240117103738336"></p><h2 id="删除功能"><a class="anchor" href="#删除功能">#</a> 删除功能</h2><p>controller</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117104809955.png" alt="image-20240117104809955"></p><p>mapper</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117104825637.png" alt="image-20240117104825637"></p><p>send 请求</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117104759764.png" alt="image-20240117104759764"></p><p>成功删除</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117104856328.png" alt="image-20240117104856328"></p><h1 id="springboot实现分页查询"><a class="anchor" href="#springboot实现分页查询">#</a> Springboot 实现分页查询</h1><h2 id="不使用框架"><a class="anchor" href="#不使用框架">#</a> 不使用框架</h2><p>controller</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117111633029.png" alt="image-20240117111633029"></p><p>mapper</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117111700430.png" alt="image-20240117111700430"></p><p>send 请求成功</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117112300102.png" alt="image-20240117112300102"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117112319792.png" alt="image-20240117112319792"></p><p><strong>配置好跨域</strong>，前端访问接口</p><pre><code class="language-vue">created() &#123;
  // 请求分页查询数据
  fetch(&quot;http://localhost:9090/user/page?pageNum=1&amp;pageSize=2&quot;).then(res =&gt; res.json()).then(res =&gt; &#123;
    console.log(res)
  &#125;)
&#125;,
</code></pre><p>成功获取数据</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117123411124.png" alt="image-20240117123411124"></p><p>前端返回 json 中<strong>去除密码回显</strong>，利用注解 **@JsonIgnore**</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117123540569.png" alt="image-20240117123540569"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117123705964.png" alt="image-20240117123705964"></p><p>之前假数据来源，现在需要替换为交互的真数据</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117124219822.png" alt="image-20240117124219822"></p><p>将 tableData 设置为 []，将 res 中数据传入</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117124414911.png" alt="image-20240117124414911"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117124345006.png" alt="image-20240117124345006"></p><p>活数据 + ES6 模板字符串 this 指定上下文，return 中需要有返回的变量</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117125751037.png" alt="image-20240117125751037"></p><p>页号和每页大小动态绑定通过特定函数与 @注释标注实现</p><p>methods，并将先前 created 的请求语句封装到 load ()</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117133459030.png" alt="image-20240117133459030"></p><p>el-pagination 注解</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117133556145.png" alt="image-20240117133556145"></p><p>再为接口加入 username 实现<strong>模糊查询</strong></p><p>mapper</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117133257852.png" alt="image-20240117133257852"></p><p>controller</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117133325933.png" alt="image-20240117133325933"></p><p>成功请求数据（模糊查询）</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117133214285.png" alt="image-20240117133214285"></p><h2 id="mybatis-plus"><a class="anchor" href="#mybatis-plus">#</a> Mybatis-Plus</h2><p>配置好版本依赖</p><p>导入分页插件的 config，新建 config/MybatisPlusConfig.java</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DbType</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span></span><span class="token class-name">MybatisPlusInterceptor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>inner<span class="token punctuation">.</span></span><span class="token class-name">PaginationInnerInterceptor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">MapperScan</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@Configuration</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">"com.xoxbc.springboot.mapper"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusConfig</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="14"></td><td><pre>     * 添加分页插件</pre></td></tr><tr><td data-num="15"></td><td><pre>     */</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token annotation punctuation">@Bean</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">MybatisPlusInterceptor</span> <span class="token function">mybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>       <span class="token class-name">MybatisPlusInterceptor</span> interceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>       interceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PaginationInnerInterceptor</span><span class="token punctuation">(</span><span class="token class-name">DbType</span><span class="token punctuation">.</span><span class="token constant">MYSQL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 如果配置多个插件，切记分页最后添加</span></pre></td></tr><tr><td data-num="20"></td><td><pre>       <span class="token comment">//interceptor.addInnerInterceptor (new PaginationInnerInterceptor ()); 如果有多数据源可以不配具体类型 否则都建议配上具体的 DbType</span></pre></td></tr><tr><td data-num="21"></td><td><pre>       <span class="token keyword">return</span> interceptor<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>选择 3.5.5 合适的版本正确整合后，成功启动运行，发送 send 请求接口也能成功 response，但是 sql 没打印，需要在 application.yml 中更换配置</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117160048859.png" alt="image-20240117160048859"></p><p>POST 请求能成功修改数据，读取动态 sql 配置 User.xml</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117160030416.png" alt="image-20240117160030416"></p><p>配置好后，修改之前的功能用 Mybatis-Plus 实现</p><p><strong>userservice 继承 ServiceImpl</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117171140678.png" alt="image-20240117171140678"></p><p><strong>usermapper 需要继承 BaseMapper</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117171229540.png" alt="image-20240117171229540"></p><p>框架里面有已经实现的 save 方法，重构之前的代码</p><p>service</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117172558522.png" alt="image-20240117172558522"></p><p>controller</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117172611985.png" alt="image-20240117172611985"></p><p>mapper</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117172635221.png" alt="image-20240117172635221"></p><p>重新访问接口，正常运行，此处需要<strong>解决附录问题 11（注解指定）</strong></p><p>成功访问</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117173425518.png" alt="image-20240117173425518"></p><p>数据库也修改</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117173444772.png" alt="image-20240117173444772"></p><p>接下来，修改数据表增加头像字段</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117174958479.png" alt="image-20240117174958479"></p><p>实体类中设置 avatarUrl 属性</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117204332382.png" alt="image-20240117204332382"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117204402041.png" alt="image-20240117204402041"></p><p>数据库成功更新</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117204428454.png" alt="image-20240117204428454"></p><p><strong>@TableField 注解</strong></p><ol><li><p>数据库中字段为 last_name, 而实体类的属性为 lastName，前提是在全局策略配置中将驼峰命名关闭。</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dbColumnUnderline<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"last_name"</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li><li><p>实体类中有一个属性为 remark，但是在数据库中没有这个字段，但是在执行插入操作时给实体类的 remark 属性赋值了，那么可以通过在实体类的 remark 属性上添加注解</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h2 id="swagger接口测试"><a class="anchor" href="#swagger接口测试">#</a> Swagger 接口测试</h2><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzYwNTQxMTEwL2FydGljbGUvZGV0YWlscy8xMjg5MDI2Nzg=">springboot3 使用 swagger 文档_springboot3 swagger-CSDN 博客</span></p><p><strong>引入依赖</strong></p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springdoc-openapi-starter-webmvc-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="swaggerconfigjava"><a class="anchor" href="#swaggerconfigjava">#</a> SwaggerConfig.java</h3><p>新建 src/main/java/com.xoxbc.springboot.<strong>config/SwaggerConfig</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>models<span class="token punctuation">.</span></span><span class="token class-name">ExternalDocumentation</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>models<span class="token punctuation">.</span></span><span class="token class-name">OpenAPI</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>models<span class="token punctuation">.</span>info<span class="token punctuation">.</span></span><span class="token class-name">Info</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>models<span class="token punctuation">.</span>info<span class="token punctuation">.</span></span><span class="token class-name">License</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@Configuration</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerConfig</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre> </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token annotation punctuation">@Bean</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">OpenAPI</span> <span class="token function">springShopOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"标题"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                        <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"我的API文档"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>                        <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"v1"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                        <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Apache 2.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://springdoc.org"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">externalDocs</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ExternalDocumentation</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                        <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"外部文档"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                        <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://springshop.wiki.github.org/docs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre> </pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>新建测试接口 controller/TestController.java</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Operation</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Parameter</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span>tags<span class="token punctuation">.</span></span><span class="token class-name">Tag</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre> </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token annotation punctuation">@RestController</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@Tag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"测试Controller"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"这是描述"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IndexController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre> </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"测试接口"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"名称"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hello "</span> <span class="token operator">+</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre> </pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>成功运行</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118191701784.png" alt="image-20240118191701784"></p><h2 id="框架重构分页查询"><a class="anchor" href="#框架重构分页查询">#</a> 框架重构分页查询</h2><p>UserMapper 中的 sql 语句和方法都可以注释掉，否则就会相当于重写框架内的方法</p><p>访问接口，成功查到</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117233451821.png" alt="image-20240117233451821"></p><p>框架内调用<strong> QueryWrapper 类的 like 方法</strong>实现模糊查询</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117233959965.png" alt="image-20240117233959965"></p><p>总</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117235616546.png" alt="image-20240117235616546"></p><p>接口测试成功</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117234346932.png" alt="image-20240117234346932"></p><h1 id="vue实现增删改查"><a class="anchor" href="#vue实现增删改查">#</a> Vue 实现增删改查</h1><h2 id="axios"><a class="anchor" href="#axios">#</a> axios</h2><p>之前使用的是 fetch API，比较麻烦</p><p>axios 封装直接调用方便</p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hxbm9kZS9hcnRpY2xlL2RldGFpbHMvMTE4MzI1ODY4">https://blog.csdn.net/xqnode/article/details/118325868</span></p><p><strong>安装 axios</strong></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">cd</span> vue</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">npm</span> i axios <span class="token parameter variable">-S</span></pre></td></tr></table></figure><p>新建<strong> src/utils/request.js</strong></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> request <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">'/api'</span><span class="token punctuation">,</span>  <span class="token comment">// 注意！！ 这里是全局统一加上了 '/api' 前缀，也就是说所有接口都会加上 '/api' 前缀在，页面里面写接口的时候就不要加 '/api' 了，否则会出现 2 个 '/api'，类似 '/api/api/user' 这样的报错，切记！！！</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">//request 拦截器</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 可以自请求发送前对请求做一些处理</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 比如统一加 token，对请求参数统一加密</span></pre></td></tr><tr><td data-num="11"></td><td><pre>request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/json;charset=utf-8'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  </pre></td></tr><tr><td data-num="14"></td><td><pre> <span class="token comment">//config.headers ['token'] = user.token;  // 设置请求头</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> config</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">//response 拦截器</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">// 可以在接口响应后统一处理结果</span></pre></td></tr><tr><td data-num="22"></td><td><pre>request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">let</span> res <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 如果是返回的文件</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>config<span class="token punctuation">.</span>responseType <span class="token operator">===</span> <span class="token string">'blob'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">return</span> res</pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">// 兼容服务端返回的字符串数据</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            res <span class="token operator">=</span> res <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">:</span> res</pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">return</span> res<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err'</span> <span class="token operator">+</span> error<span class="token punctuation">)</span> <span class="token comment">// for debug</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> request</pre></td></tr></table></figure><p><strong>main.js 导入调用</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118091529784.png" alt="image-20240118091529784"></p><p>废弃<strong> fetch 的请求方式（下面的方式）</strong>，改为 axios</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:9090/user/page?pageNum=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>pageNum<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;pageSize=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>pageSize<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;username=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> res<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>total</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>成功请求后，多添加参数，在后端 controller 利用框架实现模糊查询</p><h2 id="新增功能-2"><a class="anchor" href="#新增功能-2">#</a> 新增功能</h2><p>前端添加 dialog 对话框，动态绑定多个参数，dialogFormVisible 设置 false 不可视，与新增按钮绑定，点击新增按钮时，就变为 true，显示</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118092823355.png" alt="image-20240118092823355"></p><p>再设计出前端向后端发送 post 请求保存数据，这里添加新字段后对应的 id 自增的非常大，注解 @TableID 需要设置 type = IdType.AUTO</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118093526655.png" alt="image-20240118093526655"></p><p>数据库设置自增为 1，这里<strong>解决了问题 13</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118095104899.png" alt="image-20240118095104899"></p><p>后端 controller 设置倒序</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118103551094.png" alt="image-20240118103551094"></p><h2 id="编辑功能"><a class="anchor" href="#编辑功能">#</a> 编辑功能</h2><p>同样，给 el-button 加个 @click 触发器，这里<strong>解决了问题 14</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118115101197.png" alt="image-20240118115101197"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118115217399.png" alt="image-20240118115217399"></p><h2 id="删除功能-2"><a class="anchor" href="#删除功能-2">#</a> 删除功能</h2><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118130933924.png" alt="image-20240118130933924"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118132301716.png" alt="image-20240118132301716"></p><pre><code class="language-vue">&lt;el-popconfirm
    class=&quot;ml-5&quot;
    confirm-button-text='OK'
    cancel-button-text='Not'
    icon=&quot;el-icon-info&quot;
    icon-color=&quot;red&quot;
    title=&quot;Sure？&quot;
    @confirm=&quot;handleDel(scope.row.id)&quot;
&gt;
  &lt;el-button type=&quot;danger&quot; slot=&quot;reference&quot;&gt;删除&lt;i class=&quot;el-icon-scissors&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;
&lt;/el-popconfirm&gt;
</code></pre><p>继而实现了批量删除的功能，后端调用 mp 框架 userService.removeByIds</p><p><strong>解决了问题 15</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118152149271.png" alt="image-20240118152149271"></p><p>成功批量删除</p><h1 id="springboot代码生成器"><a class="anchor" href="#springboot代码生成器">#</a> Springboot 代码生成器</h1><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hxbm9kZS9hcnRpY2xlL2RldGFpbHMvMTIyNzA0NTQw">https://blog.csdn.net/xqnode/article/details/122704540</span></p><p>加入依赖</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!--mybatis-plus 代码生成器 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>更新 maven 依赖</p><p>还需要引入 Velocity 的依赖</p><p><span class="exturl" data-url="aHR0cHM6Ly9tdm5yZXBvc2l0b3J5LmNvbS9hcnRpZmFjdC9vcmcuYXBhY2hlLnZlbG9jaXR5">https://mvnrepository.com/artifact/org.apache.velocity</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9tdm5yZXBvc2l0b3J5LmNvbS9hcnRpZmFjdC9vcmcuYXBhY2hlLnZlbG9jaXR5L3ZlbG9jaXR5">https://mvnrepository.com/artifact/org.apache.velocity/velocity</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9tdm5yZXBvc2l0b3J5LmNvbS9hcnRpZmFjdC9vcmcuYXBhY2hlLnZlbG9jaXR5L3ZlbG9jaXR5LzEuNw==">https://mvnrepository.com/artifact/org.apache.velocity/velocity/1.7</span></p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.velocity/velocity --></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.velocity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>velocity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>新建类 com.xoxbc.springboot.<strong>utils/CodeGenerator.java</strong></p><p><span class="exturl" data-url="aHR0cHM6Ly9iYW9taWRvdS5jb20vcGFnZXMvNzc5YTZlLyMlRTQlQkQlQkYlRTclOTQlQTg=">https://baomidou.com/pages/779a6e/# 使用</span><strong>导包</strong></p><p><strong>解决错误 16</strong>，已在下面 java 代码中修改</p><h2 id="codegeneratorjava"><a class="anchor" href="#codegeneratorjava">#</a> CodeGenerator.java</h2><p>所有解决完报错需要导入的依赖见<strong>问题 17</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span></span><span class="token class-name">FastAutoGenerator</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">OutputFile</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span>rules<span class="token punctuation">.</span></span><span class="token class-name">DbColumnType</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>engine<span class="token punctuation">.</span></span><span class="token class-name">FreemarkerTemplateEngine</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Types</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CodeGenerator</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token comment">// String projectPath = System.getProperty ("user.dir");//user.dir	用户当前工作目录</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token class-name">FastAutoGenerator</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://localhost:3306/xh1xxhg?serverTimezone=GMT%2b8"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>				<span class="token punctuation">.</span><span class="token function">globalConfig</span><span class="token punctuation">(</span>builder <span class="token operator">-></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>					builder<span class="token punctuation">.</span><span class="token function">author</span><span class="token punctuation">(</span><span class="token string">"Xh1Xxhg"</span><span class="token punctuation">)</span> <span class="token comment">// 设置作者</span></pre></td></tr><tr><td data-num="17"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">enableSwagger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 开启 swagger 模式</span></pre></td></tr><tr><td data-num="18"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">enableSpringdoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 开启 SpringDoc 模式</span></pre></td></tr><tr><td data-num="19"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">outputDir</span><span class="token punctuation">(</span><span class="token string">"D:\\Project_workspace\\BackManaSys\\springboot\\src\\main\\java\\"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 指定输出目录</span></pre></td></tr><tr><td data-num="20"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>				<span class="token punctuation">.</span><span class="token function">dataSourceConfig</span><span class="token punctuation">(</span>builder <span class="token operator">-></span> builder<span class="token punctuation">.</span><span class="token function">typeConvertHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span>globalConfig<span class="token punctuation">,</span> typeRegistry<span class="token punctuation">,</span> metaInfo<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>					<span class="token keyword">int</span> typeCode <span class="token operator">=</span> metaInfo<span class="token punctuation">.</span><span class="token function">getJdbcType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">TYPE_CODE</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>					<span class="token keyword">if</span> <span class="token punctuation">(</span>typeCode <span class="token operator">==</span> <span class="token class-name">Types</span><span class="token punctuation">.</span><span class="token constant">SMALLINT</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>						<span class="token comment">// 自定义类型转换</span></pre></td></tr><tr><td data-num="25"></td><td><pre>						<span class="token keyword">return</span> <span class="token class-name">DbColumnType</span><span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>					<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>					<span class="token keyword">return</span> typeRegistry<span class="token punctuation">.</span><span class="token function">getColumnType</span><span class="token punctuation">(</span>metaInfo<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>				<span class="token punctuation">.</span><span class="token function">packageConfig</span><span class="token punctuation">(</span>builder <span class="token operator">-></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>					builder<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token string">"com.xoxbc.springboot"</span><span class="token punctuation">)</span> <span class="token comment">// 设置父包名</span></pre></td></tr><tr><td data-num="31"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">moduleName</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token comment">// 设置父包模块名</span></pre></td></tr><tr><td data-num="32"></td><td><pre>							<span class="token comment">// 对应 com.example.module_name</span></pre></td></tr><tr><td data-num="33"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">pathInfo</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span><span class="token class-name">OutputFile</span><span class="token punctuation">.</span>xml<span class="token punctuation">,</span> <span class="token string">"D:\\Project_workspace\\BackManaSys\\springboot\\src\\main\\resources\\mapper\\"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置 mapperXml 生成路径</span></pre></td></tr><tr><td data-num="34"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>				<span class="token punctuation">.</span><span class="token function">strategyConfig</span><span class="token punctuation">(</span>builder <span class="token operator">-></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>					builder<span class="token punctuation">.</span><span class="token function">addInclude</span><span class="token punctuation">(</span><span class="token string">"sys_user"</span><span class="token punctuation">)</span><span class="token comment">// 设置需要生成的表名</span></pre></td></tr><tr><td data-num="37"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">addTablePrefix</span><span class="token punctuation">(</span><span class="token string">"t_"</span><span class="token punctuation">,</span><span class="token string">"sys_"</span><span class="token punctuation">)</span> <span class="token comment">//// 设置过滤表前缀</span></pre></td></tr><tr><td data-num="38"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">entityBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableLombok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableFileOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//entity 包开启 lombok 和覆盖</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                            <span class="token punctuation">.</span><span class="token function">controllerBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableFileOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableRestStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//controller 包开启覆盖 开启 RestController 模式</span></pre></td></tr><tr><td data-num="40"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">mapperBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableFileOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//mapper 包开启覆盖</span></pre></td></tr><tr><td data-num="41"></td><td><pre>							<span class="token punctuation">.</span><span class="token function">serviceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableFileOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//service 包开启覆盖</span></pre></td></tr><tr><td data-num="42"></td><td><pre>				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>				<span class="token comment">// 使用自定义模板要注释下面一行</span></pre></td></tr><tr><td data-num="44"></td><td><pre>				<span class="token comment">//.templateEngine (new FreemarkerTemplateEngine ()) // 使用 Freemarker 引擎模板，默认的是 Velocity 引擎模板</span></pre></td></tr><tr><td data-num="45"></td><td><pre>				<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>接下来直接右键运行就可以生成，把之前的 java 各个层代码备份一下</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118161321918.png" alt="image-20240118161321918"></p><p>这里解决了<strong>错误 17</strong>，运行后生成的代码目录</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118163944128.png" alt="image-20240118163944128"></p><p><strong>本人这里没配置 swagger，与预期结果不一样，需要用到之前备份的源码替换回去</strong></p><p>配置好 swagger，实体类里的 @Schema () 注解不会报错</p><h2 id="controllerjavavm"><a class="anchor" href="#controllerjavavm">#</a> controller.java.vm</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYWxhbmQtMTQxNS9wLzEyOTc5NDQwLmh0bWw=">https://www.cnblogs.com/aland-1415/p/12979440.html</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81NTQxNDkwOC9hcnRpY2xlL2RldGFpbHMvMTI4ODIzNDY1">https://blog.csdn.net/weixin_55414908/article/details/128823465</span></p><p>这里<strong>自动生成 controller 代码模板</strong>也需要配置好（使用自定义模板需要把之前 <code>.templateEngine(new FreemarkerTemplateEngine()</code> 给注释掉）</p><p>注意目录，在<strong> resources 下的 templats 文件夹下创建 controller.java.vm 文件</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118194217004.png" alt="image-20240118194217004"></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> $<span class="token punctuation">&#123;</span><span class="token class-name"><span class="token namespace">package<span class="token punctuation">.</span></span>Controller</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> </pre></td></tr><tr><td data-num="3"></td><td><pre> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>pagination<span class="token punctuation">.</span></span><span class="token class-name">Page</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>conditions<span class="token punctuation">.</span>query<span class="token punctuation">.</span></span><span class="token class-name">QueryWrapper</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">import</span> $<span class="token punctuation">&#123;</span><span class="token class-name"><span class="token namespace">package<span class="token punctuation">.</span></span>Service</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>$<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>serviceName<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">import</span> $<span class="token punctuation">&#123;</span><span class="token class-name"><span class="token namespace">package<span class="token punctuation">.</span></span>Entity</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>$<span class="token punctuation">&#123;</span>entity<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre> </pre></td></tr><tr><td data-num="13"></td><td><pre>#<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">&#123;</span>restControllerStyle<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>#<span class="token keyword">else</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>#end</pre></td></tr><tr><td data-num="18"></td><td><pre>#<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">&#123;</span>superControllerClassPackage<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">import</span> $<span class="token punctuation">&#123;</span>superControllerClassPackage<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>#end</pre></td></tr><tr><td data-num="21"></td><td><pre> </pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="23"></td><td><pre> * &lt;p></pre></td></tr><tr><td data-num="24"></td><td><pre> * $!&#123;table.comment&#125; 前端控制器</pre></td></tr><tr><td data-num="25"></td><td><pre> * &lt;/p></pre></td></tr><tr><td data-num="26"></td><td><pre> *</pre></td></tr><tr><td data-num="27"></td><td><pre> * @author $&#123;author&#125;</pre></td></tr><tr><td data-num="28"></td><td><pre> * @since $&#123;date&#125;</pre></td></tr><tr><td data-num="29"></td><td><pre> */</pre></td></tr><tr><td data-num="30"></td><td><pre>#<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">&#123;</span>restControllerStyle<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token annotation punctuation">@RestController</span></pre></td></tr><tr><td data-num="32"></td><td><pre>#<span class="token keyword">else</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token annotation punctuation">@Controller</span></pre></td></tr><tr><td data-num="34"></td><td><pre>#end</pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"#if($&#123;package.ModuleName&#125;)/$&#123;package.ModuleName&#125;#end/#if($&#123;controllerMappingHyphenStyle&#125;)$&#123;controllerMappingHyphen&#125;#else$&#123;table.entityPath&#125;#end"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>#<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">&#123;</span>kotlin<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">class</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>controllerName<span class="token punctuation">&#125;</span>#<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">&#123;</span>superControllerClass<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">:</span> $<span class="token punctuation">&#123;</span>superControllerClass<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>#end</pre></td></tr><tr><td data-num="38"></td><td><pre> </pre></td></tr><tr><td data-num="39"></td><td><pre>#<span class="token keyword">else</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    #<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">&#123;</span>superControllerClass<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">class</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>controllerName<span class="token punctuation">&#125;</span> <span class="token keyword">extends</span> $<span class="token punctuation">&#123;</span>superControllerClass<span class="token punctuation">&#125;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    #<span class="token keyword">else</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">class</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>controllerName<span class="token punctuation">&#125;</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    #end</pre></td></tr><tr><td data-num="45"></td><td><pre> </pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token annotation punctuation">@Resource</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">private</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>serviceName<span class="token punctuation">&#125;</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token class-name">Service</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre> </pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token comment">// 新增或者更新</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token annotation punctuation">@PostMapping</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> $<span class="token punctuation">&#123;</span>entity<span class="token punctuation">&#125;</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>            <span class="token keyword">return</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token function">saveOrUpdate</span><span class="token punctuation">(</span>$<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre> </pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/&#123;id&#125;"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>            <span class="token keyword">return</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token function">removeById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre> </pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/del/batch"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">deleteBatch</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> ids<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>            <span class="token keyword">return</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token function">removeByIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre> </pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token annotation punctuation">@GetMapping</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token operator">&lt;</span>$<span class="token punctuation">&#123;</span>entity<span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>            <span class="token keyword">return</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="69"></td><td><pre> </pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/&#123;id&#125;"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="71"></td><td><pre>    <span class="token keyword">public</span> $<span class="token punctuation">&#123;</span>entity<span class="token punctuation">&#125;</span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>            <span class="token keyword">return</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="74"></td><td><pre> </pre></td></tr><tr><td data-num="75"></td><td><pre>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/page"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Page</span><span class="token operator">&lt;</span>$<span class="token punctuation">&#123;</span>entity<span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token function">findPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="77"></td><td><pre>                            <span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>            <span class="token class-name">QueryWrapper</span><span class="token operator">&lt;</span>$<span class="token punctuation">&#123;</span>entity<span class="token punctuation">&#125;</span><span class="token operator">></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>            queryWrapper<span class="token punctuation">.</span><span class="token function">orderByDesc</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>            <span class="token keyword">return</span> $<span class="token punctuation">&#123;</span>table<span class="token punctuation">.</span>entityPath<span class="token punctuation">&#125;</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>pageNum<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">,</span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="82"></td><td><pre> </pre></td></tr><tr><td data-num="83"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="84"></td><td><pre> </pre></td></tr><tr><td data-num="85"></td><td><pre>#end</pre></td></tr></table></figure><p>配置好，再运行一次 CodeGenerator.java，nice！！！</p><p>controller 彻底规范按模板生成了，泪目。</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118204011133.png" alt="image-20240118204011133"></p><p>之前的 user.xml 和 UserService.java 都可以删了</p><p>注：官方默认配置也可以找到相关内容</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118202452009.png" alt="image-20240118202452009"></p><p>到这里，pom 中依赖全乱了，项目报错无法解决运行，于是乎重新构建了一个依赖分类清晰的项目，一直到引入代码生成模板相关的一个依赖后，<strong>@Resource</strong> 出现了报错</p><p><strong>解决问题 18</strong></p><p>重启 springboot 和 vue，能成功运行，实现 CRUD</p><h1 id="vue使用路由"><a class="anchor" href="#vue使用路由">#</a> Vue 使用路由</h1><p>在 src/router/<strong>index.js 配置路由</strong></p><p>Home.vue 改为 Manage.vue</p><p>将之前的 el 代码分模块封装为组件，导入 component.js，进行<strong>全局注册</strong></p><p>config.js 设置默认全局变量</p><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDA0MDUzMTU4OA==">https://segmentfault.com/a/1190000040531588</span></p><p>组件之间通过 porps 动态绑定数据</p><p>接下来就是代码的重构，全部重构为组件式开发</p><p>&lt;router-view /&gt; 作为 el-main 标签内的主页面，控制不同的路由，这里先开发 user 路由</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119170623925.png" alt="image-20240119170623925"></p><p>之后就是配置不同的路由开发不同的页面，以及不同组件之间数据的传递</p><h2 id="路由守卫"><a class="anchor" href="#路由守卫">#</a> 路由守卫</h2><p>获取动态数据</p><p>配置好主页 / 用户管理的路由信息</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119211208458.png" alt="image-20240119211208458"></p><p>watch 监听路由</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119211237416.png" alt="image-20240119211237416"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119211247205.png" alt="image-20240119211247205"></p><p>index.js</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119211352799.png" alt="image-20240119211352799"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119211400629.png" alt="image-20240119211400629"></p><h2 id="vuex"><a class="anchor" href="#vuex">#</a> vuex</h2><p>但是此时出现了新问题，手动输入 URL 时不会动态展示，这里用到<strong> vuex</strong></p><p><strong>安装</strong></p><pre><code>npm install vuex@3 --force
</code></pre><p>新建 src/<strong>store/index.js</strong></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token literal-property property">currentPathName</span><span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token function">setPath</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            state<span class="token punctuation">.</span>currentPathName <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"currentPathName"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> store</pre></td></tr></table></figure><p>main.js 引入</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119212343184.png" alt="image-20240119212343184"></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token literal-property property">currentPathName</span><span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token function">setPath</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            state<span class="token punctuation">.</span>currentPathName <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"currentPathName"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> store</pre></td></tr></table></figure><p><strong>router/index.js</strong> 继续配置路由守卫</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"currentPathName"</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 设置当前路由名称，为了在 Header 组件中使用</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"setPath"</span><span class="token punctuation">)</span> <span class="token comment">// 触发 store 的数据更新</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 放行路由</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>这里<strong>解决问题 21</strong>，这里并不属于解决方法的四种之一，是因为 index.js 中包没有导入</p><h1 id="导入导出"><a class="anchor" href="#导入导出">#</a> 导入导出</h1><p><span class="exturl" data-url="aHR0cHM6Ly9odXRvb2wuY24vZG9jcy9pbmRleC5odG1sIy8=">入门和安装 (hutool.cn)</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9odXRvb2xraXQuY29tL3poL2RvY3MvcG9pL2V4Y2VsJUU3JTk0JTlGJUU2JTg4JTkwLWV4Y2Vsd3JpdGVyLw==">Excel 生成 - ExcelWriter – HutoolKit</span></p><p>糊涂工具类依赖导入</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.8.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.poi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>poi-ooxml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="导出"><a class="anchor" href="#导出">#</a> 导出</h2><p>在 UserController 中写导出接口</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 导出接口</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/export"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">export</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 从数据库查询所有数据</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 通过工具类创建 writer 写出到磁盘路径</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// ExcelWriter writer = ExcelUtil.getWriter("d:/writeBeanTest.xlsx");</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 在内存操作，写出到浏览器</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token class-name">ExcelWriter</span> writer <span class="token operator">=</span> <span class="token class-name">ExcelUtil</span><span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// 自定义标题别名</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">addHeaderAlias</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"用户名"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">addHeaderAlias</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">addHeaderAlias</span><span class="token punctuation">(</span><span class="token string">"nickname"</span><span class="token punctuation">,</span><span class="token string">"昵称"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">addHeaderAlias</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span><span class="token string">"邮箱"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">addHeaderAlias</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">,</span><span class="token string">"电话"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">addHeaderAlias</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">,</span><span class="token string">"地址"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">addHeaderAlias</span><span class="token punctuation">(</span><span class="token string">"createTime"</span><span class="token punctuation">,</span><span class="token string">"创建时间"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">addHeaderAlias</span><span class="token punctuation">(</span><span class="token string">"avatarUrl"</span><span class="token punctuation">,</span><span class="token string">"头像"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 一次性写出 list 内对象到 excel，使用默认样式，强制输出标题</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 设置浏览器响应的格式</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token class-name">String</span> filename <span class="token operator">=</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"用户信息"</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span><span class="token string">"attachment;filename="</span> <span class="token operator">+</span> filename <span class="token operator">+</span> <span class="token string">".xlsx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token class-name">ServletOutputStream</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>访问接口 http://localhost:9090/user/export，获取下载的 excel</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119224303333.png" alt="image-20240119224303333"></p><h2 id="导入"><a class="anchor" href="#导入">#</a> 导入</h2><p>UserController.java</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	 * excel 导入接口</pre></td></tr><tr><td data-num="3"></td><td><pre>	 * @param file</pre></td></tr><tr><td data-num="4"></td><td><pre>	 * @throws Exception</pre></td></tr><tr><td data-num="5"></td><td><pre>	 */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/import"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">imp</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token class-name">ExcelReader</span> reader <span class="token operator">=</span> <span class="token class-name">ExcelUtil</span><span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// (推荐) 通过 javabean 的方式读取 excel 内的对象，但是要求表头必须是英文，跟 JavaBean 的属性要对应起来</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// List&lt;User> list = reader.readAll(User.class);</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 忽略表头的中文，直接读取表的内容，但是比较死板繁琐</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> list <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> users <span class="token operator">=</span> <span class="token class-name">CollUtil</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> row <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        user<span class="token punctuation">.</span><span class="token function">setNickname</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        user<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        user<span class="token punctuation">.</span><span class="token function">setPhone</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        user<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        user<span class="token punctuation">.</span><span class="token function">setAvatarUrl</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    userService<span class="token punctuation">.</span><span class="token function">saveBatch</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>User.java 需要加入 @ToString 注解</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119224922714.png" alt="image-20240119224922714"></p><p>用 postman 测试接口，成功导入</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119225151099.png" alt="image-20240119225151099"></p><p>但是 IDEA 控制台打印输出不对，全是 null</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119225224362.png" alt="image-20240119225224362"></p><p>因为导入刚刚通过导出获取的自定义模板中有<strong>中文字符</strong>，所以注释掉中文模板，并删去 id 和 timestamp 两列（因为数据库自增），再重新导入返回 true 没有问题</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119225802302.png" alt="image-20240119225802302"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119225830601.png" alt="image-20240119225830601"></p><p>插入数据库成功</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119225928644.png" alt="image-20240119225928644"></p><p>这里用<strong>方法二规定列</strong>导入数据库（有中文的 excel），接口处测试没问题</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119231629798.png" alt="image-20240119231629798"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119231645741.png" alt="image-20240119231645741"></p><p>数据库刷新重新导入</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119231706993.png" alt="image-20240119231706993"></p><h2 id="前端实现"><a class="anchor" href="#前端实现">#</a> 前端实现</h2><p>先实现导出，给按钮绑定个方法</p><pre><code class="language-vue">&lt;el-button type=&quot;primary&quot; @click=&quot;exp&quot; class=&quot;ml-5&quot;&gt;导出&lt;i class=&quot;el-icon-caret-top&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;
</code></pre><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119232446422.png" alt="image-20240119232446422"></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">exp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"http://localhost:9090/user/export"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>导入需要引入<strong>新的 element 组件 el-upload</strong></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">handleImportSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">"导入成功"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>导入组件修改</p><pre><code class="language-vue">&lt;el-upload
           action=&quot;http://localhost:9090/user/import&quot;
           :show-file-list=&quot;false&quot;
           accept=&quot;xlsx&quot;
           :on-success=&quot;handleImportSuccess&quot;
           style=&quot;display: inline-block&quot;&gt;
    &lt;el-button class=&quot;ml-5&quot; type=&quot;primary&quot;&gt;导入&lt;i class=&quot;el-icon-caret-bottom&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;
&lt;/el-upload&gt;
</code></pre><p>上传 excel</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119233729131.png" alt="image-20240119233729131"></p><p>导入成功，并回显</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119233812804.png" alt="image-20240119233812804"></p><h1 id="用户登录"><a class="anchor" href="#用户登录">#</a> 用户登录</h1><p>Login.vue</p><pre><code class="language-vue">&lt;script&gt;
export default &#123;
  name: &quot;Login&quot;,
  data() &#123;
    return&#123;
      user: &#123;&#125;,
    &#125;
  &#125;,
  methods: &#123;
    login() &#123;
      
    &#125;
  &#125;
&#125;
&lt;/script&gt;

&lt;template&gt;
  &lt;div class=&quot;wrapper&quot;&gt;
    &lt;div  style=&quot;margin: 200px auto; background-color: #fff; width: 350px; height: 300px; padding: 20px; border-radius: 10px&quot;&gt;
      &lt;div style=&quot;margin: 20px 0; text-align: center; font-size: 24px&quot;&gt;&lt;b&gt;登 录&lt;/b&gt;&lt;/div&gt;
        &lt;el-input size=&quot;medium&quot; style=&quot;margin: 10px 0;&quot; prefix-icon=&quot;el-icon-user&quot; v-model=&quot;user.username&quot;&gt;&lt;/el-input&gt;
        &lt;el-input size=&quot;medium&quot; style=&quot;margin: 10px 0;&quot; prefix-icon=&quot;el-icon-lock&quot; show-password v-model=&quot;user.password&quot;&gt;&lt;/el-input&gt;
        &lt;div style=&quot;margin: 10px 0; text-align: right&quot;&gt;
          &lt;el-button type=&quot;primary&quot;size=&quot;small&quot; autocomplete=&quot;off&quot; @click=&quot;login&quot;&gt;登录&lt;/el-button&gt;
          &lt;el-button type=&quot;warning&quot;size=&quot;small&quot; autocomplete=&quot;off&quot;&gt;注册&lt;/el-button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.wrapper &#123;
  height: 100vh;
  background-image: linear-gradient(to bottom right, #FC466B, #3F5EFB);
  overflow: hidden;
&#125;
&lt;/style&gt;
</code></pre><p>index.js 设置路由</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120085805315.png" alt="image-20240120085805315"></p><p>前端模板大致写好后，需要在后端写接口，新建 controller/dto/<strong>UserDTO 类</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120090601600.png" alt="image-20240120090601600"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120090639367.png" alt="image-20240120090639367"></p><p>controller 新建接口</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120090755963.png" alt="image-20240120090755963"></p><p>Alt+Enter 在 IUserService.java 创建 login 方法</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120091330255.png" alt="image-20240120091330255"></p><p>继续点击左侧绿色箭头按钮，进入<strong> UserServiceImpl 实现类</strong>，Alt+Enter 自动实现</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120091105813.png" alt="image-20240120091105813"></p><p>继续写前端，这里<strong>解决了问题 22</strong></p><p>写了 login 方法，访问后端接口</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/user/login"</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"用户名或密码错误"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>写退出按钮的接口</p><pre><code class="language-vue">&lt;el-dropdown-item style=&quot;font-size: 14px; padding: 5px 0&quot;&gt;个人信息&lt;/el-dropdown-item&gt;
&lt;el-dropdown-item style=&quot;font-size: 14px; padding: 5px 0&quot;&gt;
  &lt;router-link to=&quot;/login&quot; style=&quot;text-decoration: none&quot;&gt;退出&lt;/router-link&gt;
&lt;/el-dropdown-item&gt;
</code></pre><p>给 Login.vue 加上表单验证的功能</p><pre><code class="language-vue">&lt;script&gt;
export default &#123;
  name: &quot;Login&quot;,
  data() &#123;
    return&#123;
      ruleForm: &#123;
        username: '',
        password: ''
      &#125;,
      rules: &#123;
        username: [
          &#123;required: true, message: '请输入用户名', trigger: 'blur'&#125;,
          &#123;min: 3, max: 10, message: '长度在 3 到 10 个字符', trigger: 'blur'&#125;
        ],
        password: [
          &#123;required: true, message: '请输入密码', trigger: 'blur'&#125;,
          &#123;min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur'&#125;
        ],
      &#125;
    &#125;
  &#125;,
  methods: &#123;
    login() &#123;
      this.$refs['ruleForm'].validate((valid) =&gt; &#123;
        if (valid) &#123;  // 表单校验合法，不合法无请求
          this.request.post(&quot;/user/login&quot;,this.user).then(res =&gt; &#123;
            if (!res) &#123;
              this.$message.error(&quot;用户名或密码错误&quot;)
            &#125;else &#123;
              setTimeout(() =&gt; &#123;this.$router.push('/')&#125;,3000)
            &#125;
          &#125;)
        &#125; else &#123;
          return false;
        &#125;
      &#125;);
    &#125;,
  &#125;
&#125;
&lt;/script&gt;

&lt;template&gt;
  &lt;div class=&quot;wrapper&quot;&gt;
    &lt;div  style=&quot;margin: 200px auto; background-color: #fff; width: 350px; height: 300px; padding: 20px; border-radius: 10px&quot;&gt;
      &lt;div style=&quot;margin: 20px 0; text-align: center; font-size: 24px&quot;&gt;&lt;b&gt;登 录&lt;/b&gt;&lt;/div&gt;
      &lt;el-form :model=&quot;ruleForm&quot; :rules=&quot;rules&quot; ref=&quot;ruleForm&quot;&gt;
        &lt;el-form-item prop=&quot;username&quot;&gt;
          &lt;el-input
              size=&quot;medium&quot; style=&quot;margin: 10px 0;&quot; prefix-icon=&quot;el-icon-user&quot;
              v-model=&quot;ruleForm.username&quot;
          &gt;
          &lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item prop=&quot;password&quot;&gt;
          &lt;el-input
              size=&quot;medium&quot; style=&quot;margin: 10px 0;&quot; prefix-icon=&quot;el-icon-lock&quot;
              show-password v-model=&quot;ruleForm.password&quot;
          &gt;
          &lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;div style=&quot;margin: 10px 0; text-align: right&quot;&gt;
          &lt;el-button type=&quot;primary&quot;size=&quot;small&quot; autocomplete=&quot;off&quot; @click=&quot;login&quot;&gt;登录&lt;/el-button&gt;
          &lt;el-button type=&quot;warning&quot;size=&quot;small&quot; autocomplete=&quot;off&quot;&gt;注册&lt;/el-button&gt;
        &lt;/div&gt;
      &lt;/el-form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.wrapper &#123;
  height: 100vh;
  background-image: linear-gradient(to bottom right, #FC466B, #3F5EFB);
  overflow: hidden;
&#125;
&lt;/style&gt;
</code></pre><p>后端使用<strong> getOne ()<strong> 时，假设数据库中存储在</strong>脏数据</strong>（用户名相同，密码不同），导致数据无法获取</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120104832692.png" alt="image-20240120104832692"></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">UserDTO</span> userDTO<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    queryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>userDTO<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    queryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span>userDTO<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>       <span class="token class-name">User</span> one <span class="token operator">=</span> <span class="token function">getOne</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>       <span class="token keyword">return</span> one <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>       <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// List&lt;User> list = list(queryWrapper);</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// return list.size() != 0;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="用户注册异常处理"><a class="anchor" href="#用户注册异常处理">#</a> 用户注册 &amp; 异常处理</h1><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120124229655.png" alt="image-20240120124229655"></p><p>封装状态码</p><p>Constants.java</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>common</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Constants</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token class-name">String</span> <span class="token constant">CODE_200</span> <span class="token operator">=</span> <span class="token string">"200"</span><span class="token punctuation">;</span> <span class="token comment">// 成功</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token class-name">String</span> <span class="token constant">CODE_401</span> <span class="token operator">=</span> <span class="token string">"401"</span><span class="token punctuation">;</span>  <span class="token comment">// 权限不足</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token class-name">String</span> <span class="token constant">CODE_400</span> <span class="token operator">=</span> <span class="token string">"400"</span><span class="token punctuation">;</span>  <span class="token comment">// 参数错误</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token class-name">String</span> <span class="token constant">CODE_500</span> <span class="token operator">=</span> <span class="token string">"500"</span><span class="token punctuation">;</span> <span class="token comment">// 系统错误</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token class-name">String</span> <span class="token constant">CODE_600</span> <span class="token operator">=</span> <span class="token string">"600"</span><span class="token punctuation">;</span> <span class="token comment">// 其他业务异常</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token class-name">String</span> <span class="token constant">DICT_TYPE_ICON</span> <span class="token operator">=</span> <span class="token string">"icon"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>Result.java</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>common</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="8"></td><td><pre> * 接口统一返回包装类</pre></td></tr><tr><td data-num="9"></td><td><pre> */</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@Data</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token annotation punctuation">@NoArgsConstructor</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token annotation punctuation">@AllArgsConstructor</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> code<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_200</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_200</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_500</span><span class="token punctuation">,</span> <span class="token string">"系统错误"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_500</span>    <span class="token punctuation">,</span> <span class="token string">"系统错误"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>注意这里 Result 类封装传输数据格式为下图所示重点</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120233306154.png" alt="image-20240120233306154"></p><p>新建 exception/<strong>GlobalExceptionHandler.java</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>exception</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBody</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@ControllerAdvice</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="14"></td><td><pre>     * 如果抛出的的是 ServiceException，则调用该方法</pre></td></tr><tr><td data-num="15"></td><td><pre>     * @param se 业务异常</pre></td></tr><tr><td data-num="16"></td><td><pre>     * @return Result</pre></td></tr><tr><td data-num="17"></td><td><pre>     */</pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ServiceException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token annotation punctuation">@ResponseBody</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">ServiceException</span> se<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>se<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> se<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>ServiceException.java</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>exception</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Getter</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * 自定义异常</pre></td></tr><tr><td data-num="7"></td><td><pre> */</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token annotation punctuation">@Getter</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServiceException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> code<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>在 controller，service 接口类实现类中实现登录状态码返回</p><p>UserController</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">UserDTO</span> userDTO<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token class-name">String</span> username <span class="token operator">=</span> userDTO<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token class-name">String</span> password <span class="token operator">=</span> userDTO<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_400</span><span class="token punctuation">,</span><span class="token string">"参数错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token class-name">UserDTO</span> dto <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>userDTO<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>UserServiceImpl.java</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserMapper</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Log</span> <span class="token constant">LOG</span> <span class="token operator">=</span> <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">UserDTO</span> userDTO<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>       <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>       queryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> userDTO<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>       queryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span> userDTO<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>       <span class="token class-name">User</span> one<span class="token punctuation">;</span> <span class="token comment">// 数据库查询信息</span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>          one <span class="token operator">=</span> <span class="token function">getOne</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>       <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>          <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_500</span><span class="token punctuation">,</span><span class="token string">"系统错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>       <span class="token keyword">if</span> <span class="token punctuation">(</span>one <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>          <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>one<span class="token punctuation">,</span> userDTO<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>          <span class="token keyword">return</span> userDTO<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>       <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_600</span><span class="token punctuation">,</span> <span class="token string">"用户名或密码错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>正常获得状态码的数据载荷预览</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120172214500.png" alt="image-20240120172214500"></p><p>这里头像显示不出来，单独在代码内加了就好了，详细原因见附录 23</p><pre><code class="language-vue">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;
</code></pre><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120215036033.png" alt="image-20240120215036033"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120215056217.png" alt="image-20240120215056217"></p><p>接着写前端注册页面 和 后端注册接口</p><p>前端注册时需要确认密码判断，这里注意表单传参变量需要统一</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120224909973.png" alt="image-20240120224909973"></p><p>接着是个人信息页面 Peson.vue 和后端 controller 的接口实现</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120234147020.png" alt="image-20240120234147020"></p><p>数据传输格式 code，data，msg</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240120234128959.png" alt="image-20240120234128959"></p><p>不断调参改 bug 即可</p><h1 id="springboot集成jwt"><a class="anchor" href="#springboot集成jwt">#</a> Springboot 集成 JWT</h1><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2dqdGFvMTEzMC9hcnRpY2xlL2RldGFpbHMvMTExNjU4MDYw">SpringBoot 集成 JWT 实现 token 验证_spring boot jwt token-CSDN 博客</span></p><p>Jwt 全称是：json web token。它将用户信息加密到 token 里，服务器不保存任何用户信息。服务器通过使用保存的密钥验证 token 的正确性，只要正确即通过验证。</p><p><strong>优点</strong></p><ol><li>简洁：可以通过 URL、POST 参数或者在 HTTP header 发送，因为数据量小，传输速度也很快；</li><li>自包含：负载中可以包含用户所需要的信息，避免了多次查询数据库；</li><li>因为 Token 是以 JSON 加密的形式保存在客户端的，所以 JWT 是跨语言的，原则上任何 web 形式都支持；</li><li>不需要在服务端保存会话信息，特别适用于分布式微服务。</li></ol><p><strong>缺点</strong></p><ol><li>无法作废已颁布的令牌；</li><li>不易应对数据过期。</li></ol><p><strong><code>Jwt</code> 消息构成</strong></p><p>一个 <code>token</code> 分 3 部分，按顺序为</p><ol><li>头部（ <code>header</code> )</li><li>载荷（ <code>payload</code> )</li><li>签证（ <code>signature</code> )</li></ol><p>三部分之间用 <code>.</code> 号做分隔。例如：</p><pre><code>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxYzdiY2IzMS02ODFlLTRlZGYtYmU3Yy0wOTlkODAzM2VkY2UiLCJleHAiOjE1Njk3Mjc4OTF9.wweMzyB3tSQK34Jmez36MmC5xpUh15Ni3vOV_SGCzJ8
</code></pre><p><strong>项目依赖 pom.xml</strong></p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.auth0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>java-jwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.10.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>根据模板继承好 token 生成、验证等方法，完善 UserDTO 类的成员变量</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>date<span class="token punctuation">.</span></span><span class="token class-name">DateUtil</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StrUtil</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span></span><span class="token class-name">JWT</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span>algorithms<span class="token punctuation">.</span></span><span class="token class-name">Algorithm</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IUserService</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">RequestContextHolder</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestAttributes</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostConstruct</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="18"></td><td><pre> * @Author Xh1Xxhg</pre></td></tr><tr><td data-num="19"></td><td><pre> * @Date 2024-01-20 23:50</pre></td></tr><tr><td data-num="20"></td><td><pre> */</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenUtils</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">IUserService</span> staticUserService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token annotation punctuation">@Resource</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">IUserService</span> userService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token annotation punctuation">@PostConstruct</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>       staticUserService <span class="token operator">=</span> userService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>    </pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="34"></td><td><pre>     * 生成 token</pre></td></tr><tr><td data-num="35"></td><td><pre>     * @return</pre></td></tr><tr><td data-num="36"></td><td><pre>     */</pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">genToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">,</span> <span class="token class-name">String</span> sign<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>       <span class="token keyword">return</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAudience</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token comment">// 将 user id 保存到 token 里面，作为载荷</span></pre></td></tr><tr><td data-num="39"></td><td><pre>             <span class="token punctuation">.</span><span class="token function">withExpiresAt</span><span class="token punctuation">(</span><span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">offsetHour</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2 小时后 token 过期</span></pre></td></tr><tr><td data-num="40"></td><td><pre>             <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>sign<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 以 password 作为 token 的密钥   //Algorithm 为加密算法</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="44"></td><td><pre>     * 获取当前登录的用户信息</pre></td></tr><tr><td data-num="45"></td><td><pre>     * @return user 对象</pre></td></tr><tr><td data-num="46"></td><td><pre>     */</pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">User</span> <span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>       <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>          <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">)</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>          <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>             <span class="token class-name">String</span> userId <span class="token operator">=</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAudience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>             <span class="token keyword">return</span> staticUserService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>       <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>       <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>token 成功设置</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121100450529.png" alt="image-20240121100450529"></p><p>同时前端放开 request.js ，加入 token 传参</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121101329367.png" alt="image-20240121101329367"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121101128081.png" alt="image-20240121101128081"></p><p>token 生成写完，就需要写</p><p>拦截器拦截 token 的类</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>common<span class="token punctuation">.</span>interceptor</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StrUtil</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span></span><span class="token class-name">JWT</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span></span><span class="token class-name">JWTVerifier</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span>algorithms<span class="token punctuation">.</span></span><span class="token class-name">Algorithm</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span><span class="token class-name">JWTDecodeException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span><span class="token class-name">JWTVerificationException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">Constants</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>exception<span class="token punctuation">.</span></span><span class="token class-name">ServiceException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IUserService</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>method<span class="token punctuation">.</span></span><span class="token class-name">HandlerMethod</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">HandlerInterceptor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="21"></td><td><pre> * JWT 拦截器</pre></td></tr><tr><td data-num="22"></td><td><pre> */</pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token annotation punctuation">@Resource</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">IUserService</span> userService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token comment">// 如果不是映射到方法直接通过</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>handler <span class="token keyword">instanceof</span> <span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token class-name">AuthAccess</span> annotation <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span> handler<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethodAnnotation</span><span class="token punctuation">(</span><span class="token class-name">AuthAccess</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>annotation <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token comment">// 执行认证</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_401</span><span class="token punctuation">,</span> <span class="token string">"无token，请重新登录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token comment">// 获取 token 中的 user id</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token class-name">String</span> userId<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            userId <span class="token operator">=</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAudience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JWTDecodeException</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_401</span><span class="token punctuation">,</span> <span class="token string">"token验证失败，请重新登录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token comment">// 根据 token 中的 userid 查询数据库</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_401</span><span class="token punctuation">,</span> <span class="token string">"用户不存在，请重新登录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token comment">// 用户密码加签验证 token</span></pre></td></tr><tr><td data-num="59"></td><td><pre>        <span class="token class-name">JWTVerifier</span> jwtVerifier <span class="token operator">=</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>            jwtVerifier<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 验证 token</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JWTVerificationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_401</span><span class="token punctuation">,</span> <span class="token string">"token验证失败，请重新登录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>以及注册拦截器的配置类</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>common<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span><span class="token class-name">JwtInterceptor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">InterceptorRegistry</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResourceHandlerRegistry</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebMvcConfigurationSupport</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@Configuration</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterceptorConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurationSupport</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">"/swagger-ui/**"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"classpath:/META-INF/resources/webjars/springfox-swagger-ui/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">addResourceHandlers</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token function">jwtInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 配置 JWT 的拦截器规则</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token comment">// 拦截所有的请求路径</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/user/login"</span><span class="token punctuation">,</span> <span class="token string">"/user/register"</span><span class="token punctuation">,</span> <span class="token string">"/**/export"</span><span class="token punctuation">,</span> <span class="token string">"/**/import"</span><span class="token punctuation">,</span> <span class="token string">"/file/**"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/swagger**/**"</span><span class="token punctuation">,</span> <span class="token string">"/webjars/**"</span><span class="token punctuation">,</span> <span class="token string">"/v3/**"</span><span class="token punctuation">,</span> <span class="token string">"/doc.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">addInterceptors</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">// 对象注册到容器</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token annotation punctuation">@Bean</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">JwtInterceptor</span> <span class="token function">jwtInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JwtInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>TokenUtils.java</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>date<span class="token punctuation">.</span></span><span class="token class-name">DateUtil</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StrUtil</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span></span><span class="token class-name">JWT</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span>algorithms<span class="token punctuation">.</span></span><span class="token class-name">Algorithm</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IUserService</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">RequestContextHolder</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestAttributes</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostConstruct</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="19"></td><td><pre> * @Author Xh1Xxhg</pre></td></tr><tr><td data-num="20"></td><td><pre> * @Date 2024-01-20 23:50</pre></td></tr><tr><td data-num="21"></td><td><pre> */</pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token annotation punctuation">@Component</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenUtils</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 为了方便调用，设置静态方法，只能使用静态成员变量</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">IUserService</span> staticUserService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token annotation punctuation">@Resource</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">IUserService</span> userService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token annotation punctuation">@PostConstruct</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>       staticUserService <span class="token operator">=</span> userService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>    </pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="38"></td><td><pre>     * 生成 token</pre></td></tr><tr><td data-num="39"></td><td><pre>     * @return</pre></td></tr><tr><td data-num="40"></td><td><pre>     */</pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">genToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">,</span> <span class="token class-name">String</span> sign<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>       <span class="token keyword">return</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAudience</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token comment">// 将 user id 保存到 token 里面，作为载荷</span></pre></td></tr><tr><td data-num="43"></td><td><pre>             <span class="token punctuation">.</span><span class="token function">withExpiresAt</span><span class="token punctuation">(</span><span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">offsetHour</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2 小时后 token 过期</span></pre></td></tr><tr><td data-num="44"></td><td><pre>             <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>sign<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 以 password 作为 token 的密钥   //Algorithm 为加密算法</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="48"></td><td><pre>     * 获取当前登录的用户信息</pre></td></tr><tr><td data-num="49"></td><td><pre>     * @return user 对象</pre></td></tr><tr><td data-num="50"></td><td><pre>     */</pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">User</span> <span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>       <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>          <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">)</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>          <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>             <span class="token class-name">String</span> userId <span class="token operator">=</span> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAudience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>             <span class="token keyword">return</span> staticUserService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>          <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>       <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>          <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>       <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>       <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>@Component</code> 是一个注解，它允许 Spring 自动检测自定义 Bean。</p><p>换句话说，无需编写任何明确的代码，Spring 就能做到：</p><ul><li>扫描应用，查找注解为 <code>@Component</code> 的类</li><li>将它们实例化，并注入任何指定的依赖</li><li>在需要的地方注入</li></ul><h1 id="文件上传"><a class="anchor" href="#文件上传">#</a> 文件上传</h1><h2 id="后端"><a class="anchor" href="#后端">#</a> 后端</h2><p>数据库创建新表</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121114622610.png" alt="image-20240121114622610"></p><p>新建 controller/FileController，初步完善</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@RestController</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/file"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;files.upload.path&#125;"</span><span class="token punctuation">)</span><span class="token comment">// 将文件的路径传入进来接口</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> fileUploadPath<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token annotation punctuation">@Resource</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">FileMapper</span> fileMapper<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">String</span> type <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">extName</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">long</span> size <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 先存储到磁盘</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">File</span> uploadParentFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>fileUploadPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// 判断配置的文件目录是否存在，若不存在则创建一个新的文件目录</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>uploadParentFile<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            uploadParentFile<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token comment">// 定义一个文件唯一的标识码</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">String</span> uuid <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">fastSimpleUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">File</span> uploadFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>fileUploadPath <span class="token operator">+</span> uuid<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token comment">// 把获取到的文件存储到磁盘目录</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>uploadFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">// 存储数据库</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>其中新建了 FileMapper.java 类</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121183537276.png" alt="image-20240121183537276"></p><p>拦截器 excludePathPatterns 放开</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121184300888.png" alt="image-20240121184300888"></p><p>postman 测试接口</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121183525497.png" alt="image-20240121183525497"></p><p>保存的文件，这里需要拼接好路径获取正确的文件名</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121184340613.png" alt="image-20240121184340613"></p><p>新建<strong> Files.java</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xoxbc<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IdType</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableId</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableName</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token annotation punctuation">@Data</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"sys_file"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Files</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> size<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> md5<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> isDelete<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> enable<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121185032356.png" alt="image-20240121185032356"></p><p>再在 FileController.java 中写 Download 文件下载接口</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 文件下载接口   http://localhost:9090/file/&#123;fileUuid&#125;;</pre></td></tr><tr><td data-num="3"></td><td><pre> * @param fileUuid</pre></td></tr><tr><td data-num="4"></td><td><pre> * @param response</pre></td></tr><tr><td data-num="5"></td><td><pre> * @throws IOException</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/&#123;fileUuid&#125;"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">downLoad</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> fileUuid<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 根据文件的唯一标识码获取文件</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token class-name">File</span> uploadFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>fileUploadPath <span class="token operator">+</span> fileUuid<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 设置输出流的格式</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token class-name">ServletOutputStream</span> os <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span> <span class="token string">"attachment;filename="</span> <span class="token operator">+</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>fileUuid<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/octet-stream"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 读取文件的字节流</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">readBytes</span><span class="token punctuation">(</span>uploadFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    os<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>成功返回路径，浏览器访问地址可以下载</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121204346553.png" alt="image-20240121204346553"></p><p>数据库也有对应数据</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121204627417.png" alt="image-20240121204627417"></p><p>新增数据库 MD5 字段，Files.java 实体类也要加上 md5 属性</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121205612286.png" alt="image-20240121205612286"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121205737822.png" alt="image-20240121205737822"></p><p>为了<strong>防止存入相同的文件</strong>，设置了 MD5 鉴别是否已经有了相同的记录，若没有相同记录，需要后续的存入操作，若有相同记录，直接返回之前的包含 uuid 的 URL 即可</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token class-name">String</span> type <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">extName</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">long</span> size <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 定义一个文件唯一的标识码</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token class-name">String</span> fileUuid <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">fastSimpleUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token constant">DOT</span> <span class="token operator">+</span> type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 拼接组合文件名</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token class-name">File</span> uploadFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>fileUploadPath <span class="token operator">+</span> fileUuid<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 判断配置的文件目录是否存在，若不存在则创建一个新的文件目录</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token class-name">File</span> parentFile <span class="token operator">=</span> uploadFile<span class="token punctuation">.</span><span class="token function">getParentFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>parentFile<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        parentFile<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token class-name">String</span> url<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 获取文件的 md5, 使文件具有唯一性，每次上传都会判断是否有相同的 md5 值</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token class-name">String</span> md5 <span class="token operator">=</span> <span class="token class-name">SecureUtil</span><span class="token punctuation">.</span><span class="token function">md5</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 从数据库查询是否存在相同的记录</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token class-name">Files</span> dbFiles <span class="token operator">=</span> <span class="token function">getFileByMd5</span><span class="token punctuation">(</span>md5<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>dbFiles <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        url <span class="token operator">=</span> dbFiles<span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token comment">// 把获取到的文件存储到磁盘目录</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>uploadFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">// 数据库若不存在重复文件，则不删除刚才上传的文件</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        url <span class="token operator">=</span> <span class="token string">"http://localhost:9090/file/"</span> <span class="token operator">+</span> fileUuid<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">// 存储数据库</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">Files</span> saveFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Files</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        saveFile<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        saveFile<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        saveFile<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>size<span class="token operator">/</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 单位 kb</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        saveFile<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        saveFile<span class="token punctuation">.</span><span class="token function">setMd5</span><span class="token punctuation">(</span>md5<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        fileMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>saveFile<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 存储</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">return</span> url<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="前端"><a class="anchor" href="#前端">#</a> 前端</h2><p>File.vue</p><pre><code class="language-vue">&lt;script&gt;
export default &#123;
  name: &quot;File&quot;,
  data()&#123;
    return&#123;
      tableData: [],
      name:'',
      multipleSelection:[],
      pageNum:1,
      pageSize:10,
      total:0
    &#125;
  &#125;,
  created() &#123;
    //重新请求加载数据
    this.load()
  &#125;,
  methods: &#123;
    load() &#123;
      this.request.get(&quot;/file/page&quot;, &#123;
        params: &#123;
          pageNum: this.pageNum,
          pageSize: this.pageSize,
          name: this.name,
        &#125;
      &#125;).then(res =&gt; &#123;
        console.log(res)
        this.tableData = res.data.records
        this.total = res.data.total
      &#125;)
    &#125;,
    reset() &#123;
      this.username = &quot;&quot;
      this.email = &quot;&quot;
      this.address = &quot;&quot;
    &#125;,
    handleDelete(id)&#123;//删除按钮
      this.request.delete(&quot;/file/&quot;+id).then(res =&gt;&#123;
        if (res.data === '200')&#123;
          this.$message.error(&quot;删除失败&quot;)
        &#125;else&#123;
          this.$message.success(&quot;删除成功&quot;)
          this.load()
        &#125;
      &#125;)
    &#125;,
    handleSelectionChange(val) &#123;
      console.log(val)
      this.multipleSelection = val;
    &#125;,
    deleteBatch()&#123;
      let ids = this.multipleSelection.map(v =&gt; v.id) //将一个个的对象数组变成[1，2，3]
      this.request.post(&quot;/file/del/batch&quot;,ids).then(res =&gt;&#123;
        if (res.data === '200')&#123;
          this.$message.error(&quot;批量删除失败&quot;)

        &#125;else&#123;
          this.$message.success(&quot;批量删除成功&quot;)
          this.load()
        &#125;
      &#125;)
    &#125;,
    handleSizeChange(pageSize) &#123;
      console.log(pageSize);
      this.pageSize = pageSize
      //用更新后的数据再请求
      this.load()
    &#125;,
    handleCurrentChange(pageNum) &#123;
      console.log(pageNum);
      this.pageNum = pageNum
      //用更新后的数据再请求
      this.load()
    &#125;,
    handleFileUploadSuccess(res)&#123;
      this.$message.success(&quot;上传成功&quot;)
      this.load()
      console.log(res)
    &#125;,
    download(url)&#123;
      window.open(url)
    &#125;,
    changeEnable(row)&#123;
      this.request.post(&quot;/file/update&quot;,row).then(res =&gt;&#123;
        if (res.code === '200')&#123;
          this.$message.success(&quot;操作成功&quot;)
        &#125;
      &#125;)
    &#125;,

  &#125;
&#125;
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;div style=&quot;padding: 10px 0 &quot;&gt;
      &lt;el-input style=&quot;width: 200px&quot; placeholder=&quot;请输入名称&quot; suffix-icon=&quot;el-icon-search&quot; v-model=&quot;name&quot;&gt;&lt;/el-input&gt;
      &lt;el-button class = &quot;ml-5&quot; type=&quot;primary&quot; @click=&quot;load&quot;&gt;搜索&lt;/el-button&gt;
      &lt;el-button type=&quot;warning&quot; @click=&quot;reset&quot; &gt;重置&lt;/el-button&gt;
    &lt;/div&gt;

    &lt;div style=&quot;margin: 10px 0 &quot;&gt;
      &lt;el-upload action=&quot;http://localhost:9090/file/upload&quot; :show-file-list=&quot;false&quot;  :on-success=&quot;handleFileUploadSuccess&quot; style=&quot;display: inline-block&quot;&gt;
        &lt;el-button type=&quot;primary&quot; class=&quot;ml-5&quot;&gt;上传文件&lt;i class=&quot;el-icon-top&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;
      &lt;/el-upload&gt;
      &lt;!--                一个添加气泡对话框--&gt;
      &lt;el-popconfirm
          class=&quot;ml-5&quot;
          confirm-button-text='确定'
          cancel-button-text='我再想想'
          icon=&quot;el-icon-info&quot;
          icon-color=&quot;red&quot;
          title=&quot;您确定删除吗？&quot; @confirm=&quot;deleteBatch&quot;
      &gt;
        &lt;el-button type=&quot;danger&quot; slot=&quot;reference&quot;&gt;批量删除 &lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;
      &lt;/el-popconfirm&gt;
    &lt;/div&gt;

    &lt;el-table :data=&quot;tableData&quot; border stripe  @selection-change=&quot;handleSelectionChange&quot;&gt;
      &lt;el-table-column type=&quot;selection&quot; width=&quot;55&quot;&gt;&lt;/el-table-column&gt;
      &lt;el-table-column prop=&quot;id&quot; label=&quot;ID&quot; width=&quot;80&quot;&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column prop=&quot;name&quot; label=&quot;文件名称&quot; &gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column prop=&quot;type&quot; label=&quot;文件类型&quot;&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column prop=&quot;size&quot; label=&quot;文件大小(KB)&quot;&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column  label=&quot;下载&quot;&gt;
        &lt;template v-slot=&quot;scope&quot;&gt;
          &lt;el-button type=&quot;primary&quot; @click=&quot;download(scope.row.url)&quot;&gt;下载&lt;/el-button&gt;
        &lt;/template&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column label=&quot;启用&quot;&gt;
        &lt;template v-slot=&quot;scope&quot;&gt;
          &lt;!--switch开关--&gt;
          &lt;el-switch v-model=&quot;scope.row.enable&quot; active-color=&quot;#13ce66&quot; inactive-color=&quot;#ccc&quot; @change=&quot;changeEnable(scope.row)&quot;&gt;&lt;/el-switch&gt;
        &lt;/template&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column label=&quot;操作&quot;&gt;
        &lt;templete v-slot=&quot;scope&quot;&gt;
          &lt;!--一个添加气泡对话框--&gt;
          &lt;el-popconfirm
              class=&quot;ml-5&quot;
              confirm-button-text='确定'
              cancel-button-text='我再想想'
              icon=&quot;el-icon-info&quot;
              icon-color=&quot;red&quot;
              title=&quot;您确定删除吗？&quot; @confirm=&quot;handleDelete(scope.row.id)&quot;
          &gt;
            &lt;el-button type=&quot;danger&quot; slot=&quot;reference&quot; &gt;删除&lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;
          &lt;/el-popconfirm&gt;
        &lt;/templete&gt;
      &lt;/el-table-column&gt;
    &lt;/el-table&gt;
    &lt;div style=&quot;padding: 10px 0&quot;&gt;
      &lt;el-pagination
          @size-change=&quot;handleSizeChange&quot;
          @current-change=&quot;handleCurrentChange&quot;
          :current-page=&quot;pageNum&quot;
          :page-sizes=&quot;[2, 5, 10,20 ]&quot;
          :page-size=&quot;pageSize&quot;
          layout=&quot;total, sizes, prev, pager, next, jumper&quot;
          :total=&quot;total&quot;&gt;
      &lt;/el-pagination&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre><p>侧边栏更新 Aside.vue</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121225702462.png" alt="image-20240121225702462"></p><p>路由更新</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121225723285.png" alt="image-20240121225723285"></p><p>成功展示</p><p>后端继续完善<strong>启用</strong>的接口</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121235908085.png" alt="image-20240121235908085"></p><p>然后是个人信息的<strong>头像上传</strong></p><p>Person.vue</p><pre><code class="language-vue">&lt;script&gt;
export default &#123;
  name: &quot;Person&quot;,
  data()&#123;
    return&#123;
      form: &#123;&#125;,
      user: localStorage.getItem(&quot;user&quot;) ? JSON.parse(localStorage.getItem(&quot;user&quot;)) : &#123;&#125;
    &#125;
  &#125;,
  created() &#123;
    this.getUser().then(res =&gt;&#123;
      console.log(res)
      this.form = res
    &#125;)
  &#125;,
  methods: &#123;
    reset() &#123;
      this.form.username = &quot;&quot;
      this.form.nickname = &quot;&quot;
      this.form.email = &quot;&quot;
      this.form.phone = &quot;&quot;
      this.form.address = &quot;&quot;
    &#125;,
    async getUser()&#123;
      return (await this.request.get(&quot;/user/username/&quot; + this.user.username)).data
    &#125;,
    save() &#123;
      this.request.post(&quot;/user/addorupdate&quot;, this.form).then(res =&gt; &#123;
        if (res.code === '200') &#123;
          this.$message.success(&quot;保存成功&quot;)

          // 触发父级更新User的方法
          this.$emit(&quot;refreshUser&quot;)

          // 更新浏览器存储的用户信息
          this.getUser().then(res =&gt; &#123;
            res.token = JSON.parse(localStorage.getItem(&quot;user&quot;)).token
            localStorage.setItem(&quot;user&quot;, JSON.stringify(res))
          &#125;)
        &#125; else &#123;
          this.$message.error(&quot;保存失败&quot;)
        &#125;
      &#125;)
    &#125;,
    handleAvatarSuccess(res)&#123;
      this.form.avatarUrl = res
    &#125;
  &#125;
&#125;
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;el-card style=&quot;width: 500px; padding: 20px;&quot;&gt;
      &lt;el-form label-width=&quot;80px&quot; size=&quot;small&quot;&gt;
        &lt;el-upload

            class=&quot;avatar-uploader&quot;
            action=&quot;http://localhost:9090/file/upload&quot;
            :show-file-list=&quot;false&quot;
            :on-success=&quot;handleAvatarSuccess&quot;
        &gt;
          &lt;img v-if=&quot;form.avatarUrl&quot; :src=&quot;form.avatarUrl&quot; class=&quot;avatar&quot;&gt;
          &lt;i v-else class=&quot;el-icon-plus avatar-uploader-icon&quot;&gt;&lt;/i&gt;
        &lt;/el-upload&gt;

        &lt;el-form-item label=&quot;用户名&quot;&gt;
          &lt;el-input v-model=&quot;form.username&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item label=&quot;昵称&quot;&gt;
          &lt;el-input v-model=&quot;form.nickname&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item label=&quot;邮箱&quot;&gt;
          &lt;el-input v-model=&quot;form.email&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item label=&quot;电话&quot;&gt;
          &lt;el-input v-model=&quot;form.phone&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item label=&quot;地址&quot;&gt;
          &lt;el-input v-model=&quot;form.address&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
          &lt;el-button type=&quot;primary&quot; @click=&quot;save&quot;&gt;确 定&lt;/el-button&gt;
          &lt;el-button class=&quot;ml-5&quot; type=&quot;warning&quot; @click=&quot;reset&quot;&gt;清 空&lt;/el-button&gt;
        &lt;/el-form-item&gt;
      &lt;/el-form&gt;
    &lt;/el-card&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.avatar-uploader&#123;
  text-align: center;
  padding-bottom:10px ;
&#125;
.avatar-uploader .el-upload &#123;
  border: 1px dashed #d9d9d9;
  border-radius: 6px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
&#125;
.avatar-uploader .el-upload:hover &#123;
  border-color: #409EFF;
&#125;
.avatar-uploader-icon &#123;
  font-size: 28px;
  color: #8c939d;
  width: 178px;
  height: 178px;
  line-height: 178px;
  text-align: center;
&#125;
.avatar &#123;
  width: 138px;
  height: 138px;
  display: block;
&#125;
&lt;/style&gt;
</code></pre><p>UserController.java 新增接口</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 新增或者更新接口</pre></td></tr><tr><td data-num="3"></td><td><pre> * @param user</pre></td></tr><tr><td data-num="4"></td><td><pre> * @return</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/addorupdate"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token class-name">String</span> username <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>       <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">CODE_400</span><span class="token punctuation">,</span> <span class="token string">"参数错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">saveOrUpdate</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>数据库更新的 URL</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240122110659529.png" alt="image-20240122110659529"></p><h1 id="vueelement-ui项目内使用阿里图标库"><a class="anchor" href="#vueelement-ui项目内使用阿里图标库">#</a> vue+element-ui 项目内使用阿里图标库</h1><p>从官网<span class="exturl" data-url="aHR0cHM6Ly93d3cuaWNvbmZvbnQuY24v"> iconfont - 阿里巴巴矢量图标库</span>找到想要的 icon</p><p>入库 —— 添加到项目 —— 下载至本地</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240122212616485.png" alt="image-20240122212616485"></p><p>下载后解压，文件夹重命名 icon，放到<strong> vue/src/assets/icon</strong> 下</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240122213141184.png" alt="image-20240122213141184"></p><p>main.js 导入全局</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240122213327057.png" alt="image-20240122213327057"></p><p>i 标签导入 icon，两层 iconfont + icon-xxxx</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240122213729706.png" alt="image-20240122213729706"></p><h1 id="前端-ipfs-后端"><a class="anchor" href="#前端-ipfs-后端">#</a> 前端 --&gt;ipfs&lt;-- 后端</h1><p>前端上传文件至 IPFS，生成哈希值传给后端，后端接口存入数据库</p><p>js-IPFS 已经被废弃，新的叫做<strong> Helia (总)</strong></p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2lwZnMvaGVsaWE=">GitHub - ipfs/helia：JavaScript 中 IPFS 的实现</span></p><p>**ipfs-core (核心组件)**<span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaXBmcy1jb3Jl">https://www.npmjs.com/package/ipfs-core</span></p><pre><code>cd vue
npm i ipfs-core
</code></pre><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8yOTQ5MTg4NS9hcnRpY2xlL2RldGFpbHMvMTA5MzkwNDk2">前端利用 ipfs 上传文件_前端获取 ipfs-CSDN 博客</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vamF5NDg3MS9oZV9jb250cmFjdD9za2lwX21vYmlsZT10cnVlI2NvbnRyb2xsZXI=">https://gitee.com/jay4871/he_contract?skip_mobile=true#controller</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9maXNjby1iY29zLWRvY3VtZW50YXRpb24ucmVhZHRoZWRvY3MuaW8vemgtY24vbGF0ZXN0L2RvY3Mvd2ViYXNlL3dlYmFzZS5odG1s">https://fisco-bcos-documentation.readthedocs.io/zh-cn/latest/docs/webase/webase.html</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0LzIzMDJfNzczMzk4MDIvYXJ0aWNsZS9kZXRhaWxzLzEzNDM2NjA5Ng==">https://blog.csdn.net/2302_77339802/article/details/134366096</span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYXBsbG8tbHd4L3AvMTQ4ODY2OTUuaHRtbA==">IPFS 使用教程 | java 对接 IPFS 的 SDK - lwx-apllo - 博客园 (cnblogs.com)</span></p><p>后端依赖</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>jitpack.io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>https://jitpack.io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">&lt;!--ps：此处一定要下载最新版本的 client：v1.3.3，旧版本 client 采用 GET 的方式发送 HTTP 请求，会导致在新的 IPFS 服务连接出现 405 报错 --></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.github.ipfs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>java-ipfs-http-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>v1.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>application.yaml</p><figure class="highlight yml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token key atrule">ipfs</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token key atrule">config</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token key atrule">multi-addr</span><span class="token punctuation">:</span> /ip4/127.0.0.1/tcp/5001 <span class="token comment"># ipfs 的服务器地址和端口</span></pre></td></tr></table></figure><p>service 接口</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IpfsService</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="5"></td><td><pre>     * 指定 path + 文件名称，上传至 ipfs</pre></td></tr><tr><td data-num="6"></td><td><pre>     *</pre></td></tr><tr><td data-num="7"></td><td><pre>     * @param filePath</pre></td></tr><tr><td data-num="8"></td><td><pre>     * @return</pre></td></tr><tr><td data-num="9"></td><td><pre>     * @throws IOException</pre></td></tr><tr><td data-num="10"></td><td><pre>     */</pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token class-name">String</span> <span class="token function">uploadToIpfs</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre> </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="14"></td><td><pre>     * 将 byte 格式的数据，上传至 ipfs</pre></td></tr><tr><td data-num="15"></td><td><pre>     *</pre></td></tr><tr><td data-num="16"></td><td><pre>     * @param data</pre></td></tr><tr><td data-num="17"></td><td><pre>     * @return</pre></td></tr><tr><td data-num="18"></td><td><pre>     * @throws IOException</pre></td></tr><tr><td data-num="19"></td><td><pre>     */</pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token class-name">String</span> <span class="token function">uploadToIpfs</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre> </pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="23"></td><td><pre>     * 根据 Hash 值，从 ipfs 下载内容，返回 byte 数据格式</pre></td></tr><tr><td data-num="24"></td><td><pre>     *</pre></td></tr><tr><td data-num="25"></td><td><pre>     * @param hash</pre></td></tr><tr><td data-num="26"></td><td><pre>     * @return</pre></td></tr><tr><td data-num="27"></td><td><pre>     */</pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">downFromIpfs</span><span class="token punctuation">(</span><span class="token class-name">String</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre> </pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="31"></td><td><pre>     * 根据 Hash 值，从 ipfs 下载内容，并写入指定文件 destFilePath</pre></td></tr><tr><td data-num="32"></td><td><pre>     *</pre></td></tr><tr><td data-num="33"></td><td><pre>     * @param hash</pre></td></tr><tr><td data-num="34"></td><td><pre>     * @param destFilePath</pre></td></tr><tr><td data-num="35"></td><td><pre>     */</pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">downFromIpfs</span><span class="token punctuation">(</span><span class="token class-name">String</span> hash<span class="token punctuation">,</span> <span class="token class-name">String</span> destFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>service 实现类</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Service</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IpfsServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IpfsService</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">//ipfs 的服务器地址和端口，与 yaml 文件中的配置对应</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;ipfs.config.multi-addr&#125;"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> multiAddr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre> </pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">IPFS</span> ipfs<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre> </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token annotation punctuation">@PostConstruct</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMultiAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        ipfs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IPFS</span><span class="token punctuation">(</span>multiAddr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre> </pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">uploadToIpfs</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">NamedStreamable<span class="token punctuation">.</span>FileWrapper</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NamedStreamable<span class="token punctuation">.</span>FileWrapper</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre> </pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">MerkleNode</span> addResult <span class="token operator">=</span> ipfs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">return</span> addResult<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre> </pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">uploadToIpfs</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">NamedStreamable<span class="token punctuation">.</span>ByteArrayWrapper</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NamedStreamable<span class="token punctuation">.</span>ByteArrayWrapper</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">MerkleNode</span> addResult <span class="token operator">=</span> ipfs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">return</span> addResult<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre> </pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">downFromIpfs</span><span class="token punctuation">(</span><span class="token class-name">String</span> hash<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            data <span class="token operator">=</span> ipfs<span class="token punctuation">.</span><span class="token function">cat</span><span class="token punctuation">(</span><span class="token class-name">Multihash</span><span class="token punctuation">.</span><span class="token function">fromBase58</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token keyword">return</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre> </pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">downFromIpfs</span><span class="token punctuation">(</span><span class="token class-name">String</span> hash<span class="token punctuation">,</span> <span class="token class-name">String</span> destFile<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            data <span class="token operator">=</span> ipfs<span class="token punctuation">.</span><span class="token function">cat</span><span class="token punctuation">(</span><span class="token class-name">Multihash</span><span class="token punctuation">.</span><span class="token function">fromBase58</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>            <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>destFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                file<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>            <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>                fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>                fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>                fos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>                    fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre> </pre></td></tr><tr><td data-num="68"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>测试接口返回 hash</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240123223750631.png" alt="image-20240123223750631"></p><p>成功上传到 IPFS 部署地址</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240123223838553.png" alt="image-20240123223838553"></p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21lbmdsdXpodS9hcnRpY2xlL2RldGFpbHMvMTA4MzM0NDM3">使用 IPFS 作为 Java 项目的文件系统_java-ipfs-http-client-CSDN 博客</span></p><p>后面接口看自己发挥咯</p><p>比如我设计的数据库长这样</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240124141318889.png" alt="image-20240124141318889"></p><h1 id="以太坊区块链网络"><a class="anchor" href="#以太坊区块链网络">#</a> 以太坊区块链网络</h1><p>genesis.json</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">"config"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"chainId"</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">"homesteadBlock"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">"eip150Block"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token property">"eip155Block"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">"eip158Block"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token property">"byzantiumBlock"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token property">"constantinopleBlock"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token property">"petersburgBlock"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token property">"ethash"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token property">"difficulty"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token property">"gasLimit"</span><span class="token operator">:</span> <span class="token string">"8000000"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token property">"alloc"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token property">"7df9a875a174b3bc565e6424a0050ebc1b2d1d82"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token property">"balance"</span><span class="token operator">:</span> <span class="token string">"300000"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token property">"f41c74c9ae680c1aa78f42e5647a62f353b7bdde"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token property">"balance"</span><span class="token operator">:</span> <span class="token string">"400000"</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="fisco区块链网络"><a class="anchor" href="#fisco区块链网络">#</a> FISCO 区块链网络</h1><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l1Y2hfaG9uZy9hcnRpY2xlL2RldGFpbHMvMTE1NTI0NTQ4">基于 FiscoBcos 的 java-sdk 实现区块链服务_bcossdk-CSDN 博客</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9maXNjby1iY29zLWRvY3VtZW50YXRpb24ucmVhZHRoZWRvY3MuaW8vemgtY24vbGF0ZXN0L2RvY3MvdHV0b3JpYWwvc2RrX2FwcGxpY2F0aW9uLmh0bWw=">开发第一个区块链应用 — FISCO BCOS 2.0 v2.9.0 文档 (fisco-bcos-documentation.readthedocs.io)</span></p><ol><li><p><code>sudo yum install -y openssl openssl-devel</code></p></li><li><pre><code>## 创建操作目录
cd ~ &amp;&amp; mkdir -p fisco &amp;&amp; cd fisco

## 下载脚本
curl -#LO https://github.com/FISCO-BCOS/FISCO-BCOS/releases/download/v2.9.1/build_chain.sh &amp;&amp; chmod u+x build_chain.sh
</code></pre></li><li><p>在 fisco 目录下执行下面的指令，生成一条单群组 4 节点的 FISCO 链。 请确保机器的 <code>30300~30303，20200~20203，8545~8548</code> 端口没有被占用。</p><pre><code>bash build_chain.sh -l 127.0.0.1:4 -p 30300,20200,8545
</code></pre><p>命令执行成功会输出 <code>All completed</code></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240201171015734.png" alt="image-20240201171015734"></p></li><li><p>启动所有节点 <code>bash nodes/127.0.0.1/start_all.sh</code></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240201171302104.png" alt="image-20240201171302104"></p></li><li><p>检查进程是否启动 <code>ps -ef | grep -v grep | grep fisco-bcos</code></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240201171213881.png" alt="image-20240201171213881"></p></li><li><p>查看节点 node0 连接的节点数 <code>tail -f nodes/127.0.0.1/node0/log/log* | grep connected</code></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240201171341998.png" alt="image-20240201171341998"></p></li><li><p>检查是否存在共识 <code>tail -f nodes/127.0.0.1/node0/log/log* | grep +++</code></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240201171459194.png" alt="image-20240201171459194"></p></li></ol><h1 id="登录页面改写"><a class="anchor" href="#登录页面改写">#</a> 登录页面改写</h1><p>解决报错 25</p><h1 id="rabbitmq"><a class="anchor" href="#rabbitmq">#</a> RabbitMQ</h1><p>部署在远程服务器，CentOS7</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 下载 rabbitmq-server</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">wget</span> https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.8.14/rabbitmq-server-3.8.14-1.el7.noarch.rpm</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 下载安装 erlang</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">curl</span> <span class="token parameter variable">-s</span> https://packagecloud.io/install/repositories/rabbitmq/erlang/script.rpm.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">sudo</span> yum <span class="token function">install</span> erlang-23.2.7-2.el7.x86_64</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">wget</span> --content-disposition <span class="token string">"https://packagecloud.io/rabbitmq/erlang/packages/el/7/erlang-23.2.7-2.el7.x86_64.rpm/download.rpm?distro_version_id=140"</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 安装 Erlang</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> erlang-23.2.7-2.el7.x86_64.rpm</pre></td></tr><tr><td data-num="9"></td><td><pre>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> erlang</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># # 查询 erlang 在系统中安装包的名字</span></pre></td></tr><tr><td data-num="11"></td><td><pre>yum list <span class="token operator">|</span> <span class="token function">grep</span> erlang</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment"># 查看 erlang 版本</span></pre></td></tr><tr><td data-num="13"></td><td><pre>erl <span class="token parameter variable">-v</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment"># 安装 rabbitmq 的 socat 依赖</span></pre></td></tr><tr><td data-num="15"></td><td><pre>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> socat</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> rabbitmq-server-3.8.14-1.el7.noarch.rpm</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment"># 安装 rabbitmq</span></pre></td></tr><tr><td data-num="18"></td><td><pre>yum <span class="token function">install</span> rabbitmq-server <span class="token parameter variable">-y</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment"># 启动服务</span></pre></td></tr><tr><td data-num="20"></td><td><pre>systemctl start rabbitmq-server</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment"># 查看服务状态，如图</span></pre></td></tr><tr><td data-num="22"></td><td><pre>systemctl status rabbitmq-server.service</pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment"># 开机自启动</span></pre></td></tr><tr><td data-num="24"></td><td><pre>systemctl <span class="token builtin class-name">enable</span> rabbitmq-server</pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment"># 停止服务</span></pre></td></tr><tr><td data-num="26"></td><td><pre>systemctl stop rabbitmq-server</pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment"># 安装需要的软件包</span></pre></td></tr><tr><td data-num="28"></td><td><pre>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils device-mapper-persistent-data lvm2</pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment"># 设置 yum 源为阿里云</span></pre></td></tr><tr><td data-num="30"></td><td><pre>yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment"># 安装 docker</span></pre></td></tr><tr><td data-num="32"></td><td><pre>yum <span class="token function">install</span> docker-ce <span class="token parameter variable">-y</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment"># 安装后查看 docker 版本</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token function">docker</span> <span class="token parameter variable">-v</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token comment"># 阿里云镜像加速</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker</pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'</span></pre></td></tr><tr><td data-num="38"></td><td><pre>&#123;</pre></td></tr><tr><td data-num="39"></td><td><pre>  "registry-mirrors": ["https://73z5h6yb.mirror.aliyuncs.com"]</pre></td></tr><tr><td data-num="40"></td><td><pre>&#125;</pre></td></tr><tr><td data-num="41"></td><td><pre>EOF</pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token function">sudo</span> systemctl daemon-reload</pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token function">sudo</span> systemctl restart <span class="token function">docker</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment"># 启动 docker</span></pre></td></tr><tr><td data-num="45"></td><td><pre>systemctl start <span class="token function">docker</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token comment"># 查看 docker 状态</span></pre></td></tr><tr><td data-num="47"></td><td><pre>systemctl status <span class="token function">docker</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token comment"># 查看 docker 镜像</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token function">docker</span> images</pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token comment"># 获取 rabbit 镜像</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token function">docker</span> pull rabbitmq:management</pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment"># 创建并运行容器</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>myrabbit <span class="token parameter variable">-p</span> <span class="token number">15672</span>:15672 rabbitmq:management</pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token comment"># 查看容器</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token comment"># 启动，最后的一串和容器中名字对应</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token function">docker</span> start 7315406118a8</pre></td></tr></table></figure><p>宝塔面板打开 15672 端口规则， <code>http://ip:15672</code></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 添加用户</span></pre></td></tr><tr><td data-num="2"></td><td><pre>rabbitmqctl add_user 用户名 密码</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 设置用户角色，分配操作权限</span></pre></td></tr><tr><td data-num="4"></td><td><pre>rabbitmqctl set_user_tags 用户名 角色</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 为用户添加资源权限 (授予访问虚拟机根节点的所有权限)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>rabbitmqctl set_permissions <span class="token parameter variable">-p</span> / 用户名 <span class="token string">".*"</span> <span class="token string">".*"</span> <span class="token string">".*"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>角色：</pre></td></tr><tr><td data-num="8"></td><td><pre>administrator：可以登录控制台、查看所有信息、并对rabbitmq进行管理</pre></td></tr><tr><td data-num="9"></td><td><pre>monToring：监控者；登录控制台，查看所有信息</pre></td></tr><tr><td data-num="10"></td><td><pre>policymaker：策略制定者；登录控制台指定策略</pre></td></tr><tr><td data-num="11"></td><td><pre>managment：普通管理员；登录控制</pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment"># 修改密码</span></pre></td></tr><tr><td data-num="14"></td><td><pre>rabbitmqctl change_ password 用户名 新密码</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment"># 删除用户</span></pre></td></tr><tr><td data-num="16"></td><td><pre>rabbitmqctl delete_user 用户名</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment"># 查看用户清单</span></pre></td></tr><tr><td data-num="18"></td><td><pre>rabbitmqctl list_users</pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment"># 如果用户无法登录，需要进入 rabbitmq 命令行设置</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment"># 进入 rabbitmq</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> myrabbit <span class="token function">bash</span></pre></td></tr></table></figure><p>防火墙</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 开放端口（54321 是面板端口，12345 是后面节点要用的）</span></pre></td></tr><tr><td data-num="2"></td><td><pre>firewall-cmd <span class="token parameter variable">--permanent</span> --add-port<span class="token operator">=</span><span class="token number">54321</span>/tcp --add-port<span class="token operator">=</span><span class="token number">12345</span>/tcp </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 查看防火墙的开放的端口</span></pre></td></tr><tr><td data-num="4"></td><td><pre>firewall-cmd <span class="token parameter variable">--permanent</span> --list-ports</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 重启防火墙 (修改配置后要重启防火墙)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>firewall-cmd <span class="token parameter variable">--reload</span></pre></td></tr></table></figure><h1 id="redis"><a class="anchor" href="#redis">#</a> Redis</h1><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vaHVuYW56cC9wLzEyMzA0NjIyLmh0bWw=">Linux 安装部署 Redis (超级详细) - 长沙大鹏 - 博客园 (cnblogs.com)</span></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">mkdir</span> redis</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">cd</span> redis</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">wget</span> http://download.redis.io/releases/redis-5.0.7.tar.gz</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">tar</span> <span class="token parameter variable">-zvxf</span> redis-5.0.7.tar.gz</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">mv</span> /home/redis/redis-5.0.7 /usr/local/redis</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token builtin class-name">cd</span> /usr/local/redis</pre></td></tr><tr><td data-num="7"></td><td><pre>yum <span class="token function">install</span> <span class="token function">make</span></pre></td></tr><tr><td data-num="8"></td><td><pre>yum <span class="token function">install</span> gcc</pre></td></tr><tr><td data-num="9"></td><td><pre>yum <span class="token function">install</span> tcl</pre></td></tr><tr><td data-num="10"></td><td><pre>yum <span class="token function">install</span> build-essential</pre></td></tr><tr><td data-num="11"></td><td><pre>yum update</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token function">make</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment"># 编译报错处理</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token function">make</span> lua jemalloc linenoise</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment"># 安装</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token function">make</span> <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/usr/local/redis <span class="token function">install</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment"># 启动</span></pre></td></tr><tr><td data-num="18"></td><td><pre>./bin/redis-server<span class="token operator">&amp;</span> ./redis.conf</pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment"># 启动报错可以全删从头再来</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token function">chmod</span> +x  redis  或者  <span class="token function">chmod</span> <span class="token number">777</span> redis</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment"># command not found</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token function">cp</span> <span class="token parameter variable">-r</span> /usr/local/redis/bin/redis-server  /usr/bin/redis-server</pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment"># 查看进程是否存在</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token function">ps</span> <span class="token parameter variable">-aux</span> <span class="token operator">|</span> <span class="token function">grep</span> redis</pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment"># 关闭</span></pre></td></tr><tr><td data-num="26"></td><td><pre>./bin/redis-cli <span class="token function">shutdown</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment"># 关闭 2：进程法</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> redis</pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token function">kill</span> <span class="token parameter variable">-9</span> PID</pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment"># 改配置文件</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token function">vim</span> /usr/local/redis/redis.conf</pre></td></tr><tr><td data-num="32"></td><td><pre>daemonize:yes</pre></td></tr><tr><td data-num="33"></td><td><pre>bind注释掉</pre></td></tr><tr><td data-num="34"></td><td><pre>protected-mode:no</pre></td></tr><tr><td data-num="35"></td><td><pre>requirepass 设置密码</pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment"># 启动客户端</span></pre></td></tr><tr><td data-num="37"></td><td><pre>./bin/redis-cli <span class="token parameter variable">-p</span> password</pre></td></tr></table></figure><h1 id="附录"><a class="anchor" href="#附录">#</a> 附录</h1><h2 id="altenter"><a class="anchor" href="#altenter">#</a> Alt+Enter</h2><p>智能快捷键，自动实现类，补全方法调用</p><h2 id="ctrlp"><a class="anchor" href="#ctrlp">#</a> Ctrl+P</h2><p>提示参数</p><h2 id="1cmd查看目录下所有文件"><a class="anchor" href="#1cmd查看目录下所有文件">#</a> 1.cmd 查看目录下所有文件</h2><ol><li><p><code>dir /b</code> 可以查看当前路径下的所有文件和文件夹。</p></li><li><p><code>dir /b /s</code> 可以查看当前路径下的所有文件和文件夹以及子目录下的文件。</p></li></ol><h2 id="2npm换源"><a class="anchor" href="#2npm换源">#</a> 2.npm 换源</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamI1MS5uZXQvYXJ0aWNsZS8yNzM5NzkuaHRt">https://www.jb51.net/article/273979.htm</span></p><ol><li><p>查看源</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> config get registry</pre></td></tr></table></figure></li><li><p>更换源</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmmirror.com/</pre></td></tr></table></figure></li></ol><h2 id="3安装element框架提示版本不适应"><a class="anchor" href="#3安装element框架提示版本不适应">#</a> 3. 安装 Element 框架提示版本不适应</h2><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115235049452.png" alt="image-20240115235049452"></p><p>在 package-lock.json 中添加 node18 的版本依赖配置</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240115235200690.png" alt="image-20240115235200690"></p><p>更改后重新安装无误</p><h2 id="4vue代码提示-idea插件"><a class="anchor" href="#4vue代码提示-idea插件">#</a> 4.vue 代码提示 - IDEA 插件</h2><p>下载 element 插件</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116001959872.png" alt="image-20240116001959872"></p><h2 id="idea主题推荐"><a class="anchor" href="#idea主题推荐">#</a> IDEA 主题推荐</h2><p>One Dark theme</p><p><span class="exturl" data-url="aHR0cHM6Ly9wbHVnaW5zLmpldGJyYWlucy5jb20vcGx1Z2luLzExOTM4LW9uZS1kYXJrLXRoZW1lL3ZlcnNpb25zI3RhYnM=">https://plugins.jetbrains.com/plugin/11938-one-dark-theme/versions#tabs</span></p><h2 id="5导航栏易出现的问题"><a class="anchor" href="#5导航栏易出现的问题">#</a> 5. 导航栏易出现的问题</h2><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L29pbHBhc3RlbGwvYXJ0aWNsZS9kZXRhaWxzLzEwODA0OTkzNw==">解决 Element-ui 中侧边栏最常出现的小问题_elementui 导航栏在小屏幕上会被折叠 - CSDN 博客</span></p><ol><li><p>侧边导航栏收缩后，右侧内容不能一起收缩 <code>width=&quot;auto&quot;</code></p><p><img data-src="https://img-blog.csdnimg.cn/20200817100443864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L29pbHBhc3RlbGw=,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><p>或者动态绑定变量改变宽度</p></li><li><p>侧边导航栏不能往下平铺整个页面</p><p>给导航栏最小高，单位用 vh<br><img data-src="https://img-blog.csdnimg.cn/20200817102657975.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L29pbHBhc3RlbGw=,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><p>本人更改的方式 <code>min-height: calc(100vh)</code></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240116133035725.png" alt="image-20240116133035725"></p><p><strong>vh：相当于浏览器的高度</strong><br><strong>vw：相当于浏览器的宽度</strong><br><strong>例如：calc (100vh - 10px) 表示整个浏览器窗口高度减去 10px 的大小</strong></p></li></ol><h2 id="6mapper-method-attempted-to-return-null-from-a-method-with-a-primitive-return-type-int试图从具有基元返回类型int的方法返回空值"><a class="anchor" href="#6mapper-method-attempted-to-return-null-from-a-method-with-a-primitive-return-type-int试图从具有基元返回类型int的方法返回空值">#</a> 6.Mapper method attempted to return null from a method with a primitive return type (int). 试图从具有基元返回类型（int）的方法返回空值。</h2><p>解决：</p><p>将返回值<strong> boolean 封装数据类型为 Boolean</strong>、<strong>int 封装数据类型为 Integer</strong>。</p><p>当 boolean、int、long 等数据类型作为返回值时，用 mybatis 查询的结果 null 时，会出现错误，查了查才发现这些基本数据类型是不能定义为 null 的。<br>也就是说当数据库查询结果为 null 时，不能直接使用 boolean、int、long 等基本数据类型作为返回值。</p><h2 id="7invalid-bound-statement-not-found-comxoxbcspringbootmapperusermapperupdate"><a class="anchor" href="#7invalid-bound-statement-not-found-comxoxbcspringbootmapperusermapperupdate">#</a> 7.Invalid bound statement (not found): com.xoxbc.springboot.mapper.UserMapper.update</h2><p>springboot 不知道 User.xml 配置的内容</p><p>解决：application.yml 中添加，扫描所有 mybatis 的 xml 文件</p><pre><code>mybatis:
  mapper-locations: classpath:mapper/*.xml
</code></pre><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117103137188.png" alt="image-20240117103137188"></p><h2 id="8前后端跨域问题"><a class="anchor" href="#8前后端跨域问题">#</a> 8. 前后端跨域问题</h2><p>前端 8080 和后端 9090 端口不一致就会形成跨域</p><p><strong>协议，ip，端口 三者有其一不同就是跨域，同时满足就是同源</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117112215793.png" alt="image-20240117112215793"></p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hxbm9kZS9hcnRpY2xlL2RldGFpbHMvMTIwOTQ3NDYy">https://blog.csdn.net/xqnode/article/details/120947462</span></p><p>新建 config/CorsConfig.java 配置文件</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>cors<span class="token punctuation">.</span></span><span class="token class-name">CorsConfiguration</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>cors<span class="token punctuation">.</span></span><span class="token class-name">UrlBasedCorsConfigurationSource</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">CorsFilter</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token annotation punctuation">@Configuration</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CorsConfig</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 当前跨域请求最大有效时长。这里默认 1 天</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> <span class="token constant">MAX_AGE</span> <span class="token operator">=</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token annotation punctuation">@Bean</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">CorsFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">UrlBasedCorsConfigurationSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">CorsConfiguration</span> corsConfiguration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 设置访问源地址</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 设置访问源请求头</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3 设置访问源请求方法</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        corsConfiguration<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token constant">MAX_AGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        source<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span> corsConfiguration<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4 对接口配置跨域设置</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsFilter</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="9dependency-combaomidoumybatis-plus-spring-boot3-starter351-not-found"><a class="anchor" href="#9dependency-combaomidoumybatis-plus-spring-boot3-starter351-not-found">#</a> 9.Dependency 'com.baomidou:mybatis-plus-spring-boot3-starter:3.5.1' not found</h2><p>mybatis-plus 依赖导不进去</p><p><span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8yMzI5NzMy">https://cloud.tencent.com/developer/article/2329732</span></p><p>SpringBoot 3 ，使用了 mybatis-plus <strong>3.5.1</strong> 版本，运行报错</p><p>原因：<strong>mybatis-plus 3.5.3 开始才支持 Spring Boot3！</strong></p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!--mybatis-plus--></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="10bean-named-ddlapplicationrunner-is-expected-to-be-of-type-orgspringframeworkbootrunner-but-was-actually-of-type-orgspringframeworkbeansfactorysupportnullbean"><a class="anchor" href="#10bean-named-ddlapplicationrunner-is-expected-to-be-of-type-orgspringframeworkbootrunner-but-was-actually-of-type-orgspringframeworkbeansfactorysupportnullbean">#</a> 10.Bean named 'ddlApplicationRunner' is expected to be of type 'org.springframework.boot.Runner' but was actually of type 'org.springframework.beans.factory.support.NullBean'</h2><p>由于版本迭代造成的问题</p><p>进过测试返现 springboot3 和<strong> mybatis-plus 3.5.5</strong> 版本可以整合，没有人任何问题。</p><p>新版本的 mybatisplus 已经修正了问题。</p><h2 id="11table-xh1xxhguser-doesnt-exist"><a class="anchor" href="#11table-xh1xxhguser-doesnt-exist">#</a> 11.Table 'xh1xxhg.user' doesn't exist</h2><p>数据库为 sys_user 名，与 mybatis-plus 框架内已经定义好的不同</p><p>需要注解指定</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"sys_user"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@TableId</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span></pre></td></tr></table></figure><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240117173016612.png" alt="image-20240117173016612"></p><h2 id="12ajax请求-304解决方案"><a class="anchor" href="#12ajax请求-304解决方案">#</a> 12.ajax 请求 304 解决方案</h2><p>请求一直是 304 Not Modified，但是能够正常返回数据库数据</p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h1d2VpMjAwMy9hcnRpY2xlL2RldGFpbHMvNzAxMzkwNjI=">https://blog.csdn.net/huwei2003/article/details/70139062</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MzkzODY5L2FydGljbGUvZGV0YWlscy84ODkwNzczNQ==">https://blog.csdn.net/qq_35393869/article/details/88907735</span></p><p>304 的标准解释是：Not Modified 客户端有缓冲的文档并发出了一个条件性的请求（一般是提供 If-Modified-Since 头表示客户只想比指定日期更新的文档）。服务器告诉客户，原来缓冲的文档还可以继续使用。<br>如果客户端在请求一个文件的时候，发现自己缓存的文件有 Last Modified ，那么在请求中会包含 If Modified Since ，这个时间就是缓存文件的 Last Modified 。因此，如果请求中包含 If Modified Since，就说明已经有缓存在客户端。只要判断这个时间和当前请求的文件的修改时间就可以确定是返回 304 还是 200 。对于静态文件，例如：CSS、图片，服务器会自动完成 Last Modified 和 If Modified Since 的比较，完成缓存或者更新。但是对于动态页面，就是动态产生的页面，往往没有包含 Last Modified 信息，这样浏览器、网关等都不会做缓存，也就是在每次请求的时候都完成一个 200 的请求。<br>因此，对于动态页面做缓存加速，首先要在 Response 的 HTTP Header 中增加 Last Modified 定义，其次根据 Request 中的 If Modified Since 和被请求内容的更新时间来返回 200 或者 304 。虽然在返回 304 的时候已经做了一次数据库查询，但是可以避免接下来更多的数据库查询，并且没有返回页面内容而只是一个 HTTP Header，从而大大的降低带宽的消耗，对于用户的感觉也是提高。</p><p>当这些缓存有效的时候，通过 HttpWatch 查看一个请求会得到这样的结果：</p><ul><li>第一次访问 200</li><li>鼠标点击二次访问 (Cache)</li><li>按 F5 刷新 304</li><li>按 Ctrl+F5 强制刷新 200</li></ul><p>如果是这样的就说明缓存真正有效了。以上就是我对 HTTP 304 的一个理解。</p><h2 id="13mybatisplus生成的id过长"><a class="anchor" href="#13mybatisplus生成的id过长">#</a> 13.MybatisPlus 生成的 id 过长</h2><p><strong>原因</strong>：使用 MybatisPlus 的 id 生成策略产生的 id 数太大，超过了 JavaScript 能够解析的最大范围，这样会导致<strong>精度丢失</strong>，前台获取到的 id 和后台数据库中不一致，从而导致无法进行增删改操作。当 id 定义为 Long 类型后，生成的 id 是一个 19 位数，而 js 能够支持解析的范围是在 - 9007199254740992 到 + 9007199254740992 之间，最大值才 16 位数。</p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pxbTE5OTI0MDk2NzAvYXJ0aWNsZS9kZXRhaWxzLzEyNTkwMDI1MA==">解决 MybatisPlus 生成的 id 过长_mybatisplus 自增 id 超大 - CSDN 博客</span></p><ol><li>id 注解 **@TableId (value = &quot;id&quot;, type = IdType.AUTO)**</li><li>删库重建 (<strong>有效</strong>)</li></ol><h2 id="14编辑功能使用时scope未定义"><a class="anchor" href="#14编辑功能使用时scope未定义">#</a> 14. 编辑功能使用时 scope 未定义</h2><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118114908170.png" alt="image-20240118114908170"></p><p>scope 未定义</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118114702564.png" alt="image-20240118114702564"></p><p>slot-scope 需要改为<strong> v-slot</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118114834425.png" alt="image-20240118114834425"></p><h2 id="15axios-delete-400错误"><a class="anchor" href="#15axios-delete-400错误">#</a> 15.axios delete 400 错误</h2><p>方法是 qs.stringfy 改为<strong>字符串拼接</strong>，或者<strong>调用 post 请求</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118151832194.png" alt="image-20240118151832194"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240118151903073.png" alt="image-20240118151903073"></p><h2 id="16mybatis-plus代码生成器fileoverride-is-deprecated"><a class="anchor" href="#16mybatis-plus代码生成器fileoverride-is-deprecated">#</a> 16.mybatis-plus 代码生成器 fileOverride ()’ is deprecated</h2><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzUyOTM5NC9hcnRpY2xlL2RldGFpbHMvMTMxMDQ4OTc2">https://blog.csdn.net/weixin_43529394/article/details/131048976</span></p><p>fileOverride()’ is deprecated<br>方法一：在 strategyConfig 分别对四个包进行配置，注意，方法名变成了 enableFileOverride</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">.</span><span class="token function">strategyConfig</span><span class="token punctuation">(</span>builder <span class="token operator">-></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    builder<span class="token punctuation">.</span><span class="token function">addInclude</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token comment">// 设置需要生成的表名</span></pre></td></tr><tr><td data-num="3"></td><td><pre>           <span class="token punctuation">.</span><span class="token function">entityBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableLombok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableFileOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>           <span class="token punctuation">.</span><span class="token function">controllerBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableFileOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>           <span class="token punctuation">.</span><span class="token function">mapperBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableFileOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>           <span class="token punctuation">.</span><span class="token function">serviceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableFileOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>方法二：将 mybatis-plus-boot-starter 和 mybatis-plus-generator 的版本降到 3.5.1</p><h2 id="17mybatis-plus代码生成器exception-in-thread-main-javalangnoclassdeffounderror-freemarkertemplateconfiguration"><a class="anchor" href="#17mybatis-plus代码生成器exception-in-thread-main-javalangnoclassdeffounderror-freemarkertemplateconfiguration">#</a> 17.mybatis-plus 代码生成器 Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: freemarker/template/Configuration</h2><p>报错</p><pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: freemarker/template/Configuration at com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine.init(FreemarkerTemplateEngine.java:41) at com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine.init(FreemarkerTemplateEngine.java:36) at com.baomidou.mybatisplus.generator.AutoGenerator.execute(AutoGenerator.java:179) at com.baomidou.mybatisplus.generator.FastAutoGenerator.execute(FastAutoGenerator.java:229) at com.xoxbc.springboot.utils.CodeGenerator.main(CodeGenerator.java:45)
</code></pre><p>导入需要的依赖即可解决</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!--mybatis-plus--></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">&lt;!--mybatis-plus 代码生成器 --></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.5.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.velocity/velocity --></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.velocity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>velocity-engine-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.freemarker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>freemarker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3.28<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h2 id="18orgspringframeworkbeansfactorybeancreationexception-error-creating-bean-with-name-usercontroller-injection-of-resource-dependencies-failed"><a class="anchor" href="#18orgspringframeworkbeansfactorybeancreationexception-error-creating-bean-with-name-usercontroller-injection-of-resource-dependencies-failed">#</a> 18.org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userController': Injection of resource dependencies failed</h2><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h5eV9ibHVlL2FydGljbGUvZGV0YWlscy8xMDQzOTIwNTg/b3BzX3JlcXVlc3RfbWlzYz0lN0IlMjJyZXF1ZXN0JTVGaWQlMjIlM0ElMjIxNzA1NTk0Mzg5MTY4MDAyMTE1MzM4MTUlMjIlMkMlMjJzY20lMjIlM0ElMjIyMDE0MDcxMy4xMzAxMDIzMzQuLiUyMiU3RCZhbXA7cmVxdWVzdF9pZD0xNzA1NTk0Mzg5MTY4MDAyMTE1MzM4MTUmYW1wO2Jpel9pZD0wJmFtcDt1dG1fbWVkaXVtPWRpc3RyaWJ1dGUucGNfc2VhcmNoX3Jlc3VsdC5ub25lLXRhc2stYmxvZy0yfmFsbH5iYWlkdV9sYW5kaW5nX3YyfmRlZmF1bHQtMS0xMDQzOTIwNTgtbnVsbC1udWxsLjE0MiU1RXY5OSU1RXBjX3NlYXJjaF9yZXN1bHRfYmFzZTImYW1wO3V0bV90ZXJtPSU0MFJlc291cmNlJUU0JUJEJUJGJUU3JTk0JUE4JUU2JThBJUE1JUU5JTk0JTk5JmFtcDtzcG09MTAxOC4yMjI2LjMwMDEuNDE4Nw==">Spring 注解 @resource 出现错误_@resource 报错 - CSDN 博客</span></p><p>使用 @Resource 注解 private 实现类实例会报错，但是用 @Autowired (required=false)</p><p>两个注解都是用作 bean 的注入时使用，都是为一个对象变量省去写 get,set 方法，自动为这个对象注入实例化对象（即注入依赖）</p><p><strong>造成报错的原因是</strong>：查找相关资料，<strong>@Resource 注解</strong>是 annotation-api.jar 包中的类，是 jdk1.6 才支持的注解，而 Tomcat6.0 版本以上，已经包含了这个 jar 包，而无需自己导入此包，因此原因是自己项目中 jdk 版本过低。<br>在 pom.xml 中添加：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.annotation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.annotation-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vc3VwZXItY2hhby9wLzc4MDg3NDMuaHRtbA==">https://www.cnblogs.com/super-chao/p/7808743.html</span></p><p><strong>这里 @Resource 报错是因为前面的 UserService 类没有删，导致 @Service 同时出现在两个地方，无法解析依赖</strong></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119090934543.png" alt="image-20240119090934543"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240119095035382.png" alt="image-20240119095035382"></p><h2 id="19注解controllerrestcontrollerrequestmapping介绍"><a class="anchor" href="#19注解controllerrestcontrollerrequestmapping介绍">#</a> 19. 注解 @Controller/@RestController/@RequestMapping 介绍</h2><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTA0MTI3MTkvYXJ0aWNsZS9kZXRhaWxzLzY5NzEwNDgw">https://blog.csdn.net/u010412719/article/details/69710480</span></p><h3 id="controller-处理http请求"><a class="anchor" href="#controller-处理http请求">#</a> @Controller 处理 http 请求</h3><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Controller</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//@ResponseBody</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/hello"</span><span class="token punctuation">,</span>method<span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>如果直接使用 @Controller 这个注解，当运行该 SpringBoot 项目后，在浏览器中输入：local:8080/hello, 会得到如下错误提示：</p><p>出现这种情况的原因在于：没有使用模版。即 @Controller 用来响应页面，@Controller 必须配合模版来使用。spring-boot 支持多种模版引擎包括：</p><ol><li>FreeMarker</li><li>Groovy</li><li>Thymeleaf （Spring 官网使用这个）</li><li>Velocity</li><li>JSP （貌似 Spring Boot 官方不推荐，STS 创建的项目会在 src/main/resources 下有个 templates 目录，这里就是让我们放模版文件的，然后并没有生成诸如 SpringMVC 中的 webapp 目录）</li></ol><p>本文以 Thymeleaf 为例介绍使用模版，具体步骤如下：</p><p>第一步：在 pom.xml 文件中添加如下模块依赖：</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>第二步：修改控制器代码，具体为：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * Created by wuranghao on 2017/4/7.</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@Controller</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/hello"</span><span class="token punctuation">,</span>method<span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>第三步：在 resources 目录的 templates 目录下添加一个 hello.html 文件，具体工程目录结构如下：</p><p>其中，hello.html 文件中的内容为：</p><p>&lt; h1 &gt;wojiushimogui&lt; /h1&gt;</p><p>这样，再次运行此项目之后，在浏览器中输入：localhost:8080/hello</p><p>就可以看到 hello.html 中所呈现的内容了。</p><p>因此，我们就直接使用 @RestController 注解来处理 http 请求来，这样简单的多。</p><h3 id="restcontroller"><a class="anchor" href="#restcontroller">#</a> @RestController</h3><p>Spring4 之后新加入的注解，原来返回 json 需要 @ResponseBody 和 @Controller 配合。</p><p>即 @RestController 是 @ResponseBody 和 @Controller 的组合注解。</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@RestController</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/hello"</span><span class="token punctuation">,</span>method<span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>与下面的代码作用一样</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Controller</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@ResponseBody</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/hello"</span><span class="token punctuation">,</span>method<span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="requestmapping-配置url映射"><a class="anchor" href="#requestmapping-配置url映射">#</a> @RequestMapping 配置 url 映射</h3><p>@RequestMapping 此注解即可以作用在控制器的某个方法上，也可以作用在此控制器类上。</p><p>当控制器在类级别上添加 @RequestMapping 注解时，这个注解会应用到控制器的所有处理器方法上。处理器方法上的 @RequestMapping 注解会对类级别上的 @RequestMapping 的声明进行补充。</p><p>看两个例子</p><p><strong>例子一：@RequestMapping 仅作用在处理器方法上</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@RestController</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/hello"</span><span class="token punctuation">,</span>method<span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>以上代码 sayHello 所响应的 url=localhost:8080/hello。</p><p><strong>例子二：@RequestMapping 仅作用在类级别上</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * Created by wuranghao on 2017/4/7.</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@Controller</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method<span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>以上代码 sayHello 所响应的 url=localhost:8080/hello, 效果与例子一一样，没有改变任何功能。</p><p><strong>例子三：@RequestMapping 作用在类级别和处理器方法上</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * Created by wuranghao on 2017/4/7.</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@RestController</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/sayHello"</span><span class="token punctuation">,</span>method<span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/sayHi"</span><span class="token punctuation">,</span>method<span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"hi"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>这样，以上代码中的 sayHello 所响应的 url=localhost:8080/hello/sayHello。</p><p>sayHi 所响应的 url=localhost:8080/hello/sayHi。</p><p>从这两个方法所响应的 url 可以回过头来看这两句话：当控制器在类级别上添加 @RequestMapping 注解时，这个注解会应用到控制器的所有处理器方法上。处理器方法上的 @RequestMapping 注解会对类级别上的 @RequestMapping 的声明进行补充。</p><p>最后说一点的是 @RequestMapping 中的 method 参数有很多中选择，一般使用 get/post.</p><p><strong>另外</strong>，@PathVaribale/@RequestParam/@GetMapping。</p><p>其中，各注解的作用为：</p><p>@PathVaribale 获取 url 中的数据</p><p>@RequestParam 获取请求参数的值</p><p>@GetMapping 组合注解</p><h2 id="20vue注册组件"><a class="anchor" href="#20vue注册组件">#</a> 20.Vue 注册组件</h2><p>Vue 注册组件有两种，一种是<strong>全局组件</strong>，一种是<strong>局部组件</strong>。整个项目经常用到的用全局写法 ( <code>优点:多次使用,方便省事</code> )，而使用局部组件的情况比较少 (除需要专供特定页面)。</p><p><strong>注册全局组件:</strong></p><p>当你注册完之后，可以在任何组件中直接使用标签，而不需要在各个组件中引入并局部注册 通常公共组件放在 src 文件夹下的 components 文件夹中，这里的组件进行全局注册。</p><p><strong>方法步骤:</strong></p><p>1、在 src 文件夹中新建 components 文件夹，components 文件夹中一般存放组件文件.<br>2、在文件夹中新建 components.js 文件<br>3、在 components.js 文件引入所有要注册的全局组件<br>4、在 main.js 中引入 components.js 文件并使用 Vue.use () 全局注册</p><p><strong>代码演示:</strong> <strong>-components.js 文件中</strong></p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> 组件名字<span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">'@/components/组件名字A'</span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> 组件名字<span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">'@/components/组件名字B '</span> </pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"组件名字A"</span><span class="token punctuation">,</span> 组件名字<span class="token constant">A</span> <span class="token punctuation">)</span>  <span class="token comment">// 前者必须是字符串格式</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'组件名字B'</span><span class="token punctuation">,</span> 组件名字<span class="token constant">B</span> <span class="token punctuation">)</span>  </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>在 main.js 引入插件</strong></p><figure class="highlight gradle"><figcaption data-lang="gradle"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> components from <span class="token string">'@/components/components.js'</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>components<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>new <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>全局组件的使用 (直接使用)</strong></p><pre><code class="language-apache">&lt;组件名称&gt;&lt;/组件名称&gt;
</code></pre><p><strong>注册局部组件:</strong></p><p>页面中私有的组件放在各自的页面文件夹中并使用下面代码局部注册</p><figure class="highlight coffeescript"><figcaption data-lang="coffeescript"></figcaption><table><tr><td data-num="1"></td><td><pre>import ComponentA from <span class="token string">'./ComponentA'</span></pre></td></tr><tr><td data-num="2"></td><td><pre>import ComponentB from <span class="token string">'./ComponentB'</span></pre></td></tr><tr><td data-num="3"></td><td><pre>export default <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token property">name</span><span class="token operator">:</span> <span class="token string">"part"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> ComponentA<span class="token punctuation">,</span> ComponentB <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="21vuex中store-is-not-defined"><a class="anchor" href="#21vuex中store-is-not-defined">#</a> 21.vuex 中 $store is not defined</h2><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzUzNjA2MzQ5L2FydGljbGUvZGV0YWlscy8xMjg3NzgzMDc/c3BtPTEwMDEuMjEwMS4zMDAxLjY2NTAuMSZhbXA7dXRtX21lZGl1bT1kaXN0cmlidXRlLnBjX3JlbGV2YW50Lm5vbmUtdGFzay1ibG9nLTJ+ZGVmYXVsdH5DVFJMSVNUflJhdGUtMS0xMjg3NzgzMDctYmxvZy0xMDMzNjM1ODkuMjM1JTVFdjQwJTVFcGNfcmVsZXZhbnRfM21fc29ydF9kbF9iYXNlMiZhbXA7ZGVwdGhfMS11dG1fc291cmNlPWRpc3RyaWJ1dGUucGNfcmVsZXZhbnQubm9uZS10YXNrLWJsb2ctMn5kZWZhdWx0fkNUUkxJU1R+UmF0ZS0xLTEyODc3ODMwNy1ibG9nLTEwMzM2MzU4OS4yMzUlNUV2NDAlNUVwY19yZWxldmFudF8zbV9zb3J0X2RsX2Jhc2UyJmFtcDt1dG1fcmVsZXZhbnRfaW5kZXg9Mg==">初次使用 vuex 报错，$store 未定义_js 执行时 store 未创建 - CSDN 博客</span></p><ol><li><p>store 均为小写</p></li><li><p>导包，from‘’部分 vue、vuex 均为开头小写</p></li><li><p>版本问题：vuex 默认 vuex4，vue2 对应 vuex3，vue3 对应 vuex4，，更换版本</p><pre><code>npm  i --save vuex@3
</code></pre></li></ol><h2 id="22unresolved-variable-message"><a class="anchor" href="#22unresolved-variable-message">#</a> 22.Unresolved variable $message</h2><p>删除项目包下的 node_modules， <code>npm install</code> 重装</p><h2 id="23referrer-的值"><a class="anchor" href="#23referrer-的值">#</a> 23.referrer 的值</h2><ol><li>空字符串默认值： 一般浏览器的默认值是 no-referrer-when-downgrade</li><li>no-referrer： 所有请求不发送 referrer</li><li>no-referrer-when-downgrade： 当请求安全级别下降时不发送 referrer。目前，只有一种情况会发生安全级别下降，即从 HTTPS 到 HTTP。HTTPS 到 HTTP 的资源引用和链接跳转都不会发送 referrer。</li><li>same-origin：对于同源的链接和引用，会发送 referrer，其他的不会。<br>origin：会发送 referrer，但只会发送源信息。源信息包括访问协议和域名。</li><li>strict-origin：这个相当于 origin 和 no-referrer-when-downgrade 的 AND 合体。即在安全级别下降时不发送 referrer；安全级别未下降时发送源信息。<br>注意：这个是新加的标准，有些浏览器可能还不支持。</li><li>origin-when-cross-origin：这个相当于 origin 和 same-origin 的 OR 合体。同源的链接和引用，会发送完全的 referrer 信息；但非同源链接和引用时，只发送源信息。</li><li>strict-origin-when-cross-origin：这个比较复杂，同源的链接和引用，会发送 referrer。安全级别下降时不发送 referrer。其它情况下发送源信息。注意：这个是新加的标准，有些浏览器可能还不支持。</li><li>unsafe-url：无论是否发生协议降级，无论是本站链接还是站外链接，统统都发送 Referrer 信息。正如其名，这是最宽松而最不安全的策略。</li></ol><p><strong>此方法会破坏浏览器原有的 referer 策略，所有从包含了上面标签的页面中发起的请求将不会携带 referer。慎用！</strong></p><h2 id="24idea设置注释模板"><a class="anchor" href="#24idea设置注释模板">#</a> 24.IDEA 设置注释模板</h2><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121093650625.png" alt="image-20240121093650625"></p><pre><code>**
 * description: 
 * @since: 1.0.0
 * @author: 作者拼音或者英文名称 
 * @date: $date$ $time$
 $params$
 $returns$
*/
</code></pre><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121090733819.png" alt="image-20240121090733819"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121090804801.png" alt="image-20240121090804801"></p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121092200987.png" alt="image-20240121092200987"></p><p><strong>params groovyScript 脚本</strong></p><pre><code>groovyScript(&quot;if(\&quot;$&#123;_1&#125;\&quot;.length() == 2) &#123;return '';&#125; else &#123;def result=''; def params=\&quot;$&#123;_1&#125;\&quot;.replaceAll('[\\\\[|\\\\]|\\\\s]', '').split(',').toList();for(i = 0; i &lt; params.size(); i++) &#123;if(i==0)&#123;result+='* @Param ' + params[i] + ': '&#125;else&#123;result+='\\n' + ' * @Param ' + params[i] + ': '&#125;&#125;; return result;&#125;&quot;, methodParameters());
</code></pre><p><strong>return groovyScript 脚本</strong></p><pre><code>groovyScript(&quot;def returnType = \&quot;$&#123;_1&#125;\&quot;; def result = '* @return: ' + returnType; return result;&quot;, methodReturnType());
</code></pre><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121091234640.png" alt="image-20240121091234640"></p><p>使用方法：/md+Enter</p><p><img data-src="C:%5CUsers%5CLENOVO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240121093851447.png" alt="image-20240121093851447"></p><h2 id="25error-error0308010cdigital-envelope-routinesunsupported"><a class="anchor" href="#25error-error0308010cdigital-envelope-routinesunsupported">#</a> 25.Error: error:0308010C:digital envelope routines::unsupported</h2><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ4MzAwNzY3L2FydGljbGUvZGV0YWlscy8xMzE0NTAzMjU=">终极解决：Error: error:0308010C:digital envelope routines::unsupported-CSDN 博客</span></p><p>出现这个错误是因为 node.js V17 版本中最近发布的 OpenSSL3.0, 而 OpenSSL3.0 对允许算法和密钥大小增加了严格的限制，可能会对生态系统造成一些影响.</p><p>在 node.js V17 以前一些可以正常运行的的应用程序，但是在 V17 版本可能会抛出这个异常。</p><ol><li><p><strong>3.1 版本降级，解决报错</strong></p><p>尝试卸载 Node.js 17 + 版本并重新安装 Node.js 16 + 版本，然后再重新启动</p></li><li><p><strong>设置参数，解决报错</strong></p><p>执行运行项目命令之前，先运行这个命令：</p><p>Linux &amp; Mac OS：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">export</span> <span class="token assign-left variable">NODE_OPTIONS</span><span class="token operator">=</span>--openssl-legacy-provider</pre></td></tr></table></figure><p>windows 命令提示符:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">set</span> <span class="token assign-left variable">NODE_OPTIONS</span><span class="token operator">=</span>--openssl-legacy-provider</pre></td></tr></table></figure></li><li><p><strong>修改配置文件，解决报错</strong></p></li></ol><p>找到项目的 <code>package.json</code> 文件，把自己对应的命令，加上 <code>&amp;&amp;</code> ，写到启动项目的配置里面（构建写不写都可以），即可。</p><p>例 1：脚手架</p><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"export NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service serve"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"export NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service build"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>例 2：Vue-Element-Admin</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token string-property property">"dev"</span><span class="token operator">:</span> <span class="token string">"export NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service serve"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 略...</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><div class="tags"><a href="/tags/As-Developers/" rel="tag"><i class="ic i-tag"></i> As Developers</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-03-17 00:14:40" itemprop="dateModified" datetime="2024-03-17T00:14:40+08:00">2024-03-17</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Xh1Xxhg 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="Xh1Xxhg 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="Xh1Xxhg 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Xh1Xxhg <i class="ic i-at"><em>@</em></i>十年磨一剑</li><li class="link"><strong>本文链接：</strong> <a href="http://yoursite.com/As%20Developers/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" title="SpringBoot3+Vue2 后台管理系统">http://yoursite.com/As Developers/后台管理系统/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/Algorithm/Acwing%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclh3brzpj20zk0m8ann.jpg" title="Acwing每日一题"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 算法</span><h3>Acwing每日一题</h3></a></div><div class="item right"><a href="/Algorithm/%E9%A2%98%E8%A7%A3%E8%AE%B0%E5%BD%95_acwing/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclhfehz7j20zk0m8u0x.jpg" title="题解记录_acwing"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 算法</span><h3>题解记录_acwing</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#vue2%E7%BB%A7%E6%89%BFelementui"><span class="toc-number">1.</span> <span class="toc-text">Vue2 继承 ElementUI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue"><span class="toc-number">1.1.</span> <span class="toc-text">Vue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD"><span class="toc-number">1.1.1.</span> <span class="toc-text">卸载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.2.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.1.3.</span> <span class="toc-text">创建项目</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#element"><span class="toc-number">1.2.</span> <span class="toc-text">Element</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-2"><span class="toc-number">1.2.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.2.</span> <span class="toc-text">使用方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue%E5%90%8E%E5%8F%B0%E4%B8%BB%E9%A2%98%E5%B8%83%E5%B1%80"><span class="toc-number">2.</span> <span class="toc-text">Vue 后台主题布局</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#springboot%E5%88%9D%E5%A7%8B"><span class="toc-number">3.</span> <span class="toc-text">Springboot 初始</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE-2"><span class="toc-number">3.1.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pom%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91%E4%BB%93%E5%BA%93"><span class="toc-number">3.2.</span> <span class="toc-text">pom 配置阿里云仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.3.</span> <span class="toc-text">搭建项目</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#springboot%E5%AE%9E%E7%8E%B0%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">4.</span> <span class="toc-text">Springboot 实现增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD"><span class="toc-number">4.1.</span> <span class="toc-text">新增功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%8A%9F%E8%83%BD"><span class="toc-number">4.2.</span> <span class="toc-text">更新功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">4.3.</span> <span class="toc-text">删除功能</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#springboot%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.</span> <span class="toc-text">Springboot 实现分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8%E6%A1%86%E6%9E%B6"><span class="toc-number">5.1.</span> <span class="toc-text">不使用框架</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis-plus"><span class="toc-number">5.2.</span> <span class="toc-text">Mybatis-Plus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#swagger%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95"><span class="toc-number">5.3.</span> <span class="toc-text">Swagger 接口测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#swaggerconfigjava"><span class="toc-number">5.3.1.</span> <span class="toc-text">SwaggerConfig.java</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E9%87%8D%E6%9E%84%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.4.</span> <span class="toc-text">框架重构分页查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue%E5%AE%9E%E7%8E%B0%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">6.</span> <span class="toc-text">Vue 实现增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#axios"><span class="toc-number">6.1.</span> <span class="toc-text">axios</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD-2"><span class="toc-number">6.2.</span> <span class="toc-text">新增功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E5%8A%9F%E8%83%BD"><span class="toc-number">6.3.</span> <span class="toc-text">编辑功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD-2"><span class="toc-number">6.4.</span> <span class="toc-text">删除功能</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#springboot%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">7.</span> <span class="toc-text">Springboot 代码生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#codegeneratorjava"><span class="toc-number">7.1.</span> <span class="toc-text">CodeGenerator.java</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#controllerjavavm"><span class="toc-number">7.2.</span> <span class="toc-text">controller.java.vm</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1"><span class="toc-number">8.</span> <span class="toc-text">Vue 使用路由</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="toc-number">8.1.</span> <span class="toc-text">路由守卫</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vuex"><span class="toc-number">8.2.</span> <span class="toc-text">vuex</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA"><span class="toc-number">9.</span> <span class="toc-text">导入导出</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA"><span class="toc-number">9.1.</span> <span class="toc-text">导出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5"><span class="toc-number">9.2.</span> <span class="toc-text">导入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.3.</span> <span class="toc-text">前端实现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-number">10.</span> <span class="toc-text">用户登录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">11.</span> <span class="toc-text">用户注册 &amp; 异常处理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#springboot%E9%9B%86%E6%88%90jwt"><span class="toc-number">12.</span> <span class="toc-text">Springboot 集成 JWT</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">13.</span> <span class="toc-text">文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF"><span class="toc-number">13.1.</span> <span class="toc-text">后端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF"><span class="toc-number">13.2.</span> <span class="toc-text">前端</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vueelement-ui%E9%A1%B9%E7%9B%AE%E5%86%85%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E5%9B%BE%E6%A0%87%E5%BA%93"><span class="toc-number">14.</span> <span class="toc-text">vue+element-ui 项目内使用阿里图标库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF-ipfs-%E5%90%8E%E7%AB%AF"><span class="toc-number">15.</span> <span class="toc-text">前端 --&gt;ipfs&lt;-- 后端</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%8C%BA%E5%9D%97%E9%93%BE%E7%BD%91%E7%BB%9C"><span class="toc-number">16.</span> <span class="toc-text">以太坊区块链网络</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#fisco%E5%8C%BA%E5%9D%97%E9%93%BE%E7%BD%91%E7%BB%9C"><span class="toc-number">17.</span> <span class="toc-text">FISCO 区块链网络</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E6%94%B9%E5%86%99"><span class="toc-number">18.</span> <span class="toc-text">登录页面改写</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rabbitmq"><span class="toc-number">19.</span> <span class="toc-text">RabbitMQ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#redis"><span class="toc-number">20.</span> <span class="toc-text">Redis</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95"><span class="toc-number">21.</span> <span class="toc-text">附录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#altenter"><span class="toc-number">21.1.</span> <span class="toc-text">Alt+Enter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ctrlp"><span class="toc-number">21.2.</span> <span class="toc-text">Ctrl+P</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1cmd%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6"><span class="toc-number">21.3.</span> <span class="toc-text">1.cmd 查看目录下所有文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2npm%E6%8D%A2%E6%BA%90"><span class="toc-number">21.4.</span> <span class="toc-text">2.npm 换源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E5%AE%89%E8%A3%85element%E6%A1%86%E6%9E%B6%E6%8F%90%E7%A4%BA%E7%89%88%E6%9C%AC%E4%B8%8D%E9%80%82%E5%BA%94"><span class="toc-number">21.5.</span> <span class="toc-text">3. 安装 Element 框架提示版本不适应</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4vue%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA-idea%E6%8F%92%E4%BB%B6"><span class="toc-number">21.6.</span> <span class="toc-text">4.vue 代码提示 - IDEA 插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#idea%E4%B8%BB%E9%A2%98%E6%8E%A8%E8%8D%90"><span class="toc-number">21.7.</span> <span class="toc-text">IDEA 主题推荐</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E5%AF%BC%E8%88%AA%E6%A0%8F%E6%98%93%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">21.8.</span> <span class="toc-text">5. 导航栏易出现的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6mapper-method-attempted-to-return-null-from-a-method-with-a-primitive-return-type-int%E8%AF%95%E5%9B%BE%E4%BB%8E%E5%85%B7%E6%9C%89%E5%9F%BA%E5%85%83%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8Bint%E7%9A%84%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%E7%A9%BA%E5%80%BC"><span class="toc-number">21.9.</span> <span class="toc-text">6.Mapper method attempted to return null from a method with a primitive return type (int). 试图从具有基元返回类型（int）的方法返回空值。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7invalid-bound-statement-not-found-comxoxbcspringbootmapperusermapperupdate"><span class="toc-number">21.10.</span> <span class="toc-text">7.Invalid bound statement (not found): com.xoxbc.springboot.mapper.UserMapper.update</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E5%89%8D%E5%90%8E%E7%AB%AF%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">21.11.</span> <span class="toc-text">8. 前后端跨域问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9dependency-combaomidoumybatis-plus-spring-boot3-starter351-not-found"><span class="toc-number">21.12.</span> <span class="toc-text">9.Dependency &#39;com.baomidou:mybatis-plus-spring-boot3-starter:3.5.1&#39; not found</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10bean-named-ddlapplicationrunner-is-expected-to-be-of-type-orgspringframeworkbootrunner-but-was-actually-of-type-orgspringframeworkbeansfactorysupportnullbean"><span class="toc-number">21.13.</span> <span class="toc-text">10.Bean named &#39;ddlApplicationRunner&#39; is expected to be of type &#39;org.springframework.boot.Runner&#39; but was actually of type &#39;org.springframework.beans.factory.support.NullBean&#39;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11table-xh1xxhguser-doesnt-exist"><span class="toc-number">21.14.</span> <span class="toc-text">11.Table &#39;xh1xxhg.user&#39; doesn&#39;t exist</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12ajax%E8%AF%B7%E6%B1%82-304%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">21.15.</span> <span class="toc-text">12.ajax 请求 304 解决方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13mybatisplus%E7%94%9F%E6%88%90%E7%9A%84id%E8%BF%87%E9%95%BF"><span class="toc-number">21.16.</span> <span class="toc-text">13.MybatisPlus 生成的 id 过长</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E7%BC%96%E8%BE%91%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E6%97%B6scope%E6%9C%AA%E5%AE%9A%E4%B9%89"><span class="toc-number">21.17.</span> <span class="toc-text">14. 编辑功能使用时 scope 未定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15axios-delete-400%E9%94%99%E8%AF%AF"><span class="toc-number">21.18.</span> <span class="toc-text">15.axios delete 400 错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16mybatis-plus%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8fileoverride-is-deprecated"><span class="toc-number">21.19.</span> <span class="toc-text">16.mybatis-plus 代码生成器 fileOverride ()’ is deprecated</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17mybatis-plus%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8exception-in-thread-main-javalangnoclassdeffounderror-freemarkertemplateconfiguration"><span class="toc-number">21.20.</span> <span class="toc-text">17.mybatis-plus 代码生成器 Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: freemarker&#x2F;template&#x2F;Configuration</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18orgspringframeworkbeansfactorybeancreationexception-error-creating-bean-with-name-usercontroller-injection-of-resource-dependencies-failed"><span class="toc-number">21.21.</span> <span class="toc-text">18.org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userController&#39;: Injection of resource dependencies failed</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19%E6%B3%A8%E8%A7%A3controllerrestcontrollerrequestmapping%E4%BB%8B%E7%BB%8D"><span class="toc-number">21.22.</span> <span class="toc-text">19. 注解 @Controller&#x2F;@RestController&#x2F;@RequestMapping 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#controller-%E5%A4%84%E7%90%86http%E8%AF%B7%E6%B1%82"><span class="toc-number">21.22.1.</span> <span class="toc-text">@Controller 处理 http 请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#restcontroller"><span class="toc-number">21.22.2.</span> <span class="toc-text">@RestController</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#requestmapping-%E9%85%8D%E7%BD%AEurl%E6%98%A0%E5%B0%84"><span class="toc-number">21.22.3.</span> <span class="toc-text">@RequestMapping 配置 url 映射</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20vue%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6"><span class="toc-number">21.23.</span> <span class="toc-text">20.Vue 注册组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21vuex%E4%B8%ADstore-is-not-defined"><span class="toc-number">21.24.</span> <span class="toc-text">21.vuex 中 $store is not defined</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22unresolved-variable-message"><span class="toc-number">21.25.</span> <span class="toc-text">22.Unresolved variable $message</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23referrer-%E7%9A%84%E5%80%BC"><span class="toc-number">21.26.</span> <span class="toc-text">23.referrer 的值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24idea%E8%AE%BE%E7%BD%AE%E6%B3%A8%E9%87%8A%E6%A8%A1%E6%9D%BF"><span class="toc-number">21.27.</span> <span class="toc-text">24.IDEA 设置注释模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25error-error0308010cdigital-envelope-routinesunsupported"><span class="toc-number">21.28.</span> <span class="toc-text">25.Error: error:0308010C:digital envelope routines::unsupported</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/As%20Developers/Hexo+Shoka%E4%B8%BB%E9%A2%98%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" rel="bookmark" title="Github Pages+Hexo搭建个人Blog">Github Pages+Hexo搭建个人Blog</a></li><li class="active"><a href="/As%20Developers/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" rel="bookmark" title="SpringBoot3+Vue2后台管理系统">SpringBoot3+Vue2后台管理系统</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Xh1Xxhg" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Xh1Xxhg</p><div class="description" itemprop="description">My 网安之路</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">27</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">5</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">15</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1hoMVh4aGc=" title="https:&#x2F;&#x2F;github.com&#x2F;Xh1Xxhg"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9oeGgxX2VtYWls" title="https:&#x2F;&#x2F;twitter.com&#x2F;hxh1_email"><i class="ic i-twitter"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly95LnFxLmNvbS9uL3J5cXEvcGxheWxpc3QvMzY1MDEyNzIxMQ==" title="https:&#x2F;&#x2F;y.qq.com&#x2F;n&#x2F;ryqq&#x2F;playlist&#x2F;3650127211"><i class="ic i-cloud-music"></i></span> <a href="/hxh1_email@163.com" title="hxh1_email@163.com" class="item email"><i class="ic i-envelope"></i></a></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/Algorithm/Acwing%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/Algorithm/%E9%A2%98%E8%A7%A3%E8%AE%B0%E5%BD%95_acwing/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/CTF/" title="分类于 CTF">CTF</a></div><span><a href="/CTF/%E5%85%A5%E9%97%A8%E5%BB%BA%E8%AE%AE/" title="网安学习&amp;入门建议">网安学习&入门建议</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a></div><span><a href="/Algorithm/%E8%B4%A8%E6%95%B0%E9%97%AE%E9%A2%98/" title="质数问题">质数问题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="分类于 算法">算法</a></div><span><a href="/Algorithm/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" title="动态规划">动态规划</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF/" title="分类于 CTF">CTF</a></div><span><a href="/CTF/Misc/" title="CTF-MISC总结">CTF-MISC总结</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF/" title="分类于 CTF">CTF</a></div><span><a href="/CTF/PWN/" title="CTF_PWN总结">CTF_PWN总结</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF/" title="分类于 CTF">CTF</a></div><span><a href="/CTF/Crypto/" title="CTF-Crypto总结">CTF-Crypto总结</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF%E8%B5%9B%E9%A2%98/" title="分类于 CTF 赛题">CTF 赛题</a></div><span><a href="/CTF-WriteUp/2024%20VenomCTF/" title="2024 VenomCTF">2024 VenomCTF</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF%E8%B5%9B%E9%A2%98/" title="分类于 CTF 赛题">CTF 赛题</a></div><span><a href="/CTF-WriteUp/2023%20%E9%99%95%E8%A5%BF%E7%9C%81%E5%A4%A7%E5%AD%A6%E7%94%9F%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%A4%A7%E8%B5%9B/" title="2023 陕西省大学生网络安全大赛">2023 陕西省大学生网络安全大赛</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%BC%80%E5%8F%91/" title="分类于 开发">开发</a></div><span><a href="/As%20Developers/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" title="SpringBoot3+Vue2后台管理系统">SpringBoot3+Vue2后台管理系统</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF/" title="分类于 CTF">CTF</a></div><span><a href="/CTF/Blockchain/" title="CTF-Blockchain总结">CTF-Blockchain总结</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Xh1Xxhg @ Xh1Xxhg's Home</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">185k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">2:49</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"As Developers/后台管理系统/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->